<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content="How-to-create-unitary-tests.md,  ">

<title>How to create unitary tests | Kratos Multiphysics Documentation</title>

<link rel="stylesheet" href="/css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/modern-business.css">

<!-- Latest compiled and minified CSS -->
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"> -->
<link rel="stylesheet" href="/css/bootstrap.min.css">
<link rel="stylesheet" href="/css/customstyles.css">
<link rel="stylesheet" href="/css/boxshadowproperties.css">

<!-- Most color styles are extracted out to here -->
<link rel="stylesheet" href="/css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

<script src="/js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
<!-- MathJax.js -->
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<script src="/js/toc.js"></script>
<script src="/js/customscripts.js"></script>

<link rel="shortcut icon" href="/images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4000/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="/">&nbsp;<span class="projectTitle"> Kratos Multiphysics Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="https://github.com/KratosMultiphysics/Kratos" target="_blank" rel="noopener">GitHub</a></li>
                
                
                
                <li><a href="news">News</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Kratos<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="/pages/Kratos/For_Users/General/Overview.html">For Users</a></li>
                        
                        
                        
                        <li><a href="/pages/Kratos/For_Developers/General/Application-Cases.html">For Developers</a></li>
                        
                        
                        
                        <li><a href="/pages/Kratos/Processes/General/Overview.html">Processes</a></li>
                        
                        
                        
                        <li><a href="/pages/Kratos/Utilities/General/Overview.html">Utilities</a></li>
                        
                        
                        
                        <li><a href="/pages/Kratos/Debugging/General/Checking-memory-usage-with-Valgrind.html">Debugging</a></li>
                        
                        
                        
                        <li><a href="/pages/Kratos/Documentation_Guide/General/Overview.html">Documentation Guide</a></li>
                        
                        
                        
                        <li><a href="/pages/Kratos/Workshops/2019/running_an_example_from_GiD.html">Workshops</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Applications<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="/pages/Applications/Discrete_Element_Modelling_Application/General/Basic-DEM-Benchmarking.html">Discrete Element Modelling Application</a></li>
                        
                        
                        
                        <li><a href="/pages/Applications/Fluid-Structure_Interaction_Application/General/2D-Mok-benchmark.html">Fluid-Structure Interaction Application</a></li>
                        
                        
                        
                        <li><a href="/pages/Applications/Fluid_Dynamics_Application/General/2D-Cavity-flow-problem.html">Fluid Dynamics Application</a></li>
                        
                        
                        
                        <li><a href="/pages/Applications/Mapping_Application/General/How-to-do-Mapping-between-nonmatching-meshes.html">Mapping Application</a></li>
                        
                        
                        
                        <li><a href="/pages/Applications/Meshing_Application/General/Utilities-MMG-Process.html">Meshing Application</a></li>
                        
                        
                        
                        <li><a href="/pages/Applications/Particle_Mechanics_Application/General/Overview.html">Particle Mechanics Application</a></li>
                        
                        
                        
                        <li><a href="/pages/Applications/Reduced_Order_Modelling_Application/General/API-for-RomApplication-(draft-to-be-moved-elsewhere).html">Reduced Order Modelling Application</a></li>
                        
                        
                        
                        <li><a href="/pages/Applications/Statistics_Application/General/Overview.html">Statistics Application</a></li>
                        
                        
                        
                        <li><a href="/pages/Applications/Structural_Mechanics_Application/General/0_Roll-up-beam-cantilever.html">Structural Mechanics Application</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
                
                
			<li>



  <a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:kratosmultiphysics@gmail.com?subject=Kratos Multiphysics Documentation feedback&body=I have some feedback about the How to create unitary tests page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a>

</li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="/js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: '/search.json',
                                searchResultTemplate: '<li><a href="{url}" title="How to create unitary tests">{title}</a></li>',
                    noResultsText: '',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">For Developers </li>
  
  
  
  <li>
      <a title="General" href="#">General</a>
      <ul>
          
          
          
          <li><a title="Adding dynamic contributions to the element file" href="/pages/Kratos/For_Developers/General/Tutorial-Adding-dynamic-contributions-to-the-element-file.html">Adding dynamic contributions to the element file</a></li>
          
          
          
          
          
          
          <li><a title="Adjoint API" href="/pages/Kratos/For_Developers/General/Adjoint-API.html">Adjoint API</a></li>
          
          
          
          
          
          
          <li><a title="Analysis stage for pure diffusion problem" href="/pages/Kratos/For_Developers/General/Tutorial-Analysis-stage-for-pure-diffusion-problem.html">Analysis stage for pure diffusion problem</a></li>
          
          
          
          
          
          
          <li><a title="Application Cases" href="/pages/Kratos/For_Developers/General/Application-Cases.html">Application Cases</a></li>
          
          
          
          
          
          
          <li><a title="Applications as python modules" href="/pages/Kratos/For_Developers/General/Applications-as-python-modules.html">Applications as python modules</a></li>
          
          
          
          
          
          
          <li><a title="Applying periodic boundary conditions" href="/pages/Kratos/For_Developers/General/Applying-periodic-boundary-conditions.html">Applying periodic boundary conditions</a></li>
          
          
          
          
          
          
          <li><a title="Authorship of Kratos files" href="/pages/Kratos/For_Developers/General/Authorship-of-Kratos-files.html">Authorship of Kratos files</a></li>
          
          
          
          
          
          
          <li><a title="Clang Tidy to automatically correct code" href="/pages/Kratos/For_Developers/General/How-to-use-Clang-Tidy-to-automatically-correct-code.html">Clang Tidy to automatically correct code</a></li>
          
          
          
          
          
          
          <li><a title="Common Python Interface of Applications for Users" href="/pages/Kratos/For_Developers/General/Common-Python-Interface-of-Applications-for-Users.html">Common Python Interface of Applications for Users</a></li>
          
          
          
          
          
          
          <li><a title="Constitutive Law" href="/pages/Kratos/For_Developers/General/How-to-use-the-Constitutive-Law-class.html">Constitutive Law</a></li>
          
          
          
          
          
          
          <li><a title="Cotire" href="/pages/Kratos/For_Developers/General/How-to-use-Cotire.html">Cotire</a></li>
          
          
          
          
          
          
          <li><a title="Creating a wrapper of convergence criteria" href="/pages/Kratos/For_Developers/General/Tutorial-Creating-a-wrapper-of-convergence-criteria.html">Creating a wrapper of convergence criteria</a></li>
          
          
          
          
          
          
          <li><a title="Creating an Utility" href="/pages/Kratos/For_Developers/General/Tutorial-Creating-an-Utility.html">Creating an Utility</a></li>
          
          
          
          
          
          
          <li><a title="Creating the Conditions" href="/pages/Kratos/For_Developers/General/Tutorial-Creating-the-Conditions.html">Creating the Conditions</a></li>
          
          
          
          
          
          
          <li><a title="Creating the Element" href="/pages/Kratos/For_Developers/General/Tutorial-Creating-the-Element.html">Creating the Element</a></li>
          
          
          
          
          
          
          <li><a title="Creating the Python Solver file" href="/pages/Kratos/For_Developers/General/Tutorial-Creating-the-Python-Solver-file.html">Creating the Python Solver file</a></li>
          
          
          
          
          
          
          <li><a title="Data management" href="/pages/Kratos/For_Developers/General/Data-management.html">Data management</a></li>
          
          
          
          
          
          
          <li><a title="Editing the main files" href="/pages/Kratos/For_Developers/General/Tutorial-Editing-the-main-files.html">Editing the main files</a></li>
          
          
          
          
          
          
          <li><a title="How to Access DataBase" href="/pages/Kratos/For_Developers/General/How-to-Access-DataBase.html">How to Access DataBase</a></li>
          
          
          
          
          
          
          <li><a title="How to apply a function to a list of variables" href="/pages/Kratos/For_Developers/General/How-to-apply-a-function-to-a-list-of-variables.html">How to apply a function to a list of variables</a></li>
          
          
          
          
          
          
          <li><a title="How to configure clang‐format" href="/pages/Kratos/For_Developers/General/How-to-configure-clang‐format.html">How to configure clang‐format</a></li>
          
          
          
          
          
          
          <li class="active"><a title="How to create unitary tests" href="/pages/Kratos/For_Developers/General/How-to-create-unitary-tests.html">How to create unitary tests</a></li>
          
          
          
          
          
          
          <li><a title="How to generate python wheels" href="/pages/Kratos/For_Developers/General/How-to-generate-python-wheels.html">How to generate python wheels</a></li>
          
          
          
          
          
          
          <li><a title="How to make Git ignore the files resulting from a compilation without conflicts in .gitignore" href="/pages/Kratos/For_Developers/General/How-to-make-Git-ignore-the-files-resulting-from-a-compilation-without-conflicts-in-.gitignore.html">How to make Git ignore the files resulting from a compilation without conflicts in .gitignore</a></li>
          
          
          
          
          
          
          <li><a title="How to run multiple cases using PyCOMPSs" href="/pages/Kratos/For_Developers/General/How-to-run-multiple-cases-using-PyCOMPSs.html">How to run multiple cases using PyCOMPSs</a></li>
          
          
          
          
          
          
          <li><a title="KRATOS_API for Windows Compilation" href="/pages/Kratos/For_Developers/General/KRATOS_API-for-Windows-Compilation.html">KRATOS_API for Windows Compilation</a></li>
          
          
          
          
          
          
          <li><a title="Kratos classes accesible via python" href="/pages/Kratos/For_Developers/General/Kratos-classes-accesible-via-python.html">Kratos classes accesible via python</a></li>
          
          
          
          
          
          
          <li><a title="Kratos input files and I O" href="/pages/Kratos/For_Developers/General/Kratos-input-files-and-I-O.html">Kratos input files and I O</a></li>
          
          
          
          
          
          
          <li><a title="Kratos input files and IO" href="/pages/Kratos/For_Developers/General/Kratos-input-files-and-IO.html">Kratos input files and IO</a></li>
          
          
          
          
          
          
          <li><a title="KratosAPI MultiPoint Constraint (MPC) interface" href="/pages/Kratos/For_Developers/General/MultiPoint-Constraint-interface.html">KratosAPI MultiPoint Constraint (MPC) interface</a></li>
          
          
          
          
          
          
          <li><a title="Local axes orientation" href="/pages/Kratos/For_Developers/General/Local-axes-orientation.html">Local axes orientation</a></li>
          
          
          
          
          
          
          <li><a title="Logger" href="/pages/Kratos/For_Developers/General/How-to-use-Logger.html">Logger</a></li>
          
          
          
          
          
          
          <li><a title="Manipulating solution values" href="/pages/Kratos/For_Developers/General/Manipulating-solution-values.html">Manipulating solution values</a></li>
          
          
          
          
          
          
          <li><a title="Mesh node ordering" href="/pages/Kratos/For_Developers/General/Mesh-node-ordering.html">Mesh node ordering</a></li>
          
          
          
          
          
          
          <li><a title="ModelPart and SubModelPart" href="/pages/Kratos/For_Developers/General/ModelPart-and-SubModelPart.html">ModelPart and SubModelPart</a></li>
          
          
          
          
          
          
          <li><a title="ModelPart entities" href="/pages/Kratos/For_Developers/General/ModelPart-entities.html">ModelPart entities</a></li>
          
          
          
          
          
          
          <li><a title="Nodes and Nodal Data" href="/pages/Kratos/For_Developers/General/Nodes-and-Nodal-Data.html">Nodes and Nodal Data</a></li>
          
          
          
          
          
          
          <li><a title="Parallel Utilities" href="/pages/Kratos/For_Developers/General/Parallel-Utilities.html">Parallel Utilities</a></li>
          
          
          
          
          
          
          <li><a title="PointerCommunicator" href="/pages/Kratos/For_Developers/General/How-to-use-PointerCommunicator.html">PointerCommunicator</a></li>
          
          
          
          
          
          
          <li><a title="PointerMapCommunicator" href="/pages/Kratos/For_Developers/General/How-to-use-PointerMapCommunicator.html">PointerMapCommunicator</a></li>
          
          
          
          
          
          
          <li><a title="Porting to AMatrix" href="/pages/Kratos/For_Developers/General/Porting-to-AMatrix.html">Porting to AMatrix</a></li>
          
          
          
          
          
          
          <li><a title="Porting to PyBind11   common steps" href="/pages/Kratos/For_Developers/General/Porting-to-PyBind11-common-steps.html">Porting to PyBind11   common steps</a></li>
          
          
          
          
          
          
          <li><a title="Processes In the application of BCs" href="/pages/Kratos/For_Developers/General/How-to-use-Processes-In-the-application-of-BCs.html">Processes In the application of BCs</a></li>
          
          
          
          
          
          
          <li><a title="Pure diffusion solver derived from main python solver" href="/pages/Kratos/For_Developers/General/Tutorial-Pure-diffusion-solver-derived-from-main-python-solver.html">Pure diffusion solver derived from main python solver</a></li>
          
          
          
          
          
          
          <li><a title="Quaternions in Kratos" href="/pages/Kratos/For_Developers/General/How-to-use-quaternions-in-Kratos.html">Quaternions in Kratos</a></li>
          
          
          
          
          
          
          <li><a title="Smart Pointers within Kratos" href="/pages/Kratos/For_Developers/General/How-to-use-Smart-Pointers-within-Kratos.html">Smart Pointers within Kratos</a></li>
          
          
          
          
          
          
          <li><a title="Solving strategies" href="/pages/Kratos/For_Developers/General/Solving-strategies.html">Solving strategies</a></li>
          
          
          
          
          
          
          <li><a title="Sparse Linear Algebra (native Kratos implementation)" href="/pages/Kratos/For_Developers/General/Sparse-Linear-Algebra-(native-Kratos-implementation).html">Sparse Linear Algebra (native Kratos implementation)</a></li>
          
          
          
          
          
          
          <li><a title="Style Guide" href="/pages/Kratos/For_Developers/General/Style-Guide.html">Style Guide</a></li>
          
          
          
          
          
          
          <li><a title="Using alias for Ublas matrix and vector" href="/pages/Kratos/For_Developers/General/Using-alias-for-Ublas-matrix-and-vector.html">Using alias for Ublas matrix and vector</a></li>
          
          
          
          
          
          
          <li><a title="Using processes to customize a simulation" href="/pages/Kratos/For_Developers/General/Using-processes-to-customize-a-simulation.html">Using processes to customize a simulation</a></li>
          
          
          
          
          
          
          <li><a title="Utilities Colors utility" href="/pages/Kratos/For_Developers/General/Utilities-Colors-utility.html">Utilities Colors utility</a></li>
          
          
          
          
          
          
          <li><a title="Windows Install" href="/pages/Kratos/For_Developers/General/Windows-Install.html">Windows Install</a></li>
          
          
          
          
          
          
          <li><a title="Windows Install (MinGW)" href="/pages/Kratos/For_Developers/General/Windows-Install-(MinGW).html">Windows Install (MinGW)</a></li>
          
          
          
          
          
          
          <li><a title="the FEAST Solver in Kratos?" href="/pages/Kratos/For_Developers/General/How-to-use-the-FEAST-Solver-in-Kratos.html">the FEAST Solver in Kratos?</a></li>
          
          
          
          
          
          
          <li><a title="the Geometry" href="/pages/Kratos/For_Developers/General/How-to-use-the-Geometry.html">the Geometry</a></li>
          
          
          
          
          
          
          <li><a title="the PaStiX solver in Kratos" href="/pages/Kratos/For_Developers/General/How-to-use-the-PaStiX-solver-in-Kratos.html">the PaStiX solver in Kratos</a></li>
          
          
          
          
      </ul>
  </li>
  
  
  
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">How to create unitary tests</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    


    

    <a target="_blank" rel="noopener" href="https://github.com/KratosMultiphysics/Kratos/tree/master/docs/pages/Kratos/For_Developers/General/How-to-create-unitary-tests.md" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>

    

   <h1 id="content">Content</h1>
<ul>
  <li><a href="https://github.com/KratosMultiphysics/Kratos/wiki/How-to-create-unitary-tests#overview">Overview</a></li>
  <li><a href="https://github.com/KratosMultiphysics/Kratos/wiki/How-to-create-unitary-tests#python">Python</a>:
    <ul>
      <li><a href="https://github.com/KratosMultiphysics/Kratos/wiki/How-to-create-unitary-tests#how-to-run-tests">How to run test</a></li>
      <li><a href="https://github.com/KratosMultiphysics/Kratos/wiki/How-to-create-unitary-tests#basic-structure">Basic structure</a></li>
      <li><a href="https://github.com/KratosMultiphysics/Kratos/wiki/How-to-create-unitary-tests#general-structure">General structure</a></li>
      <li><a href="https://github.com/KratosMultiphysics/Kratos/wiki/How-to-create-unitary-tests#structure-for-examples">Structure for examples</a></li>
      <li><a href="https://github.com/KratosMultiphysics/Kratos/wiki/How-to-create-unitary-tests#some-common-commands-in-unittest">Some common commands in Unittests</a></li>
      <li><a href="https://github.com/KratosMultiphysics/Kratos/wiki/How-to-create-unitary-tests#skipping-tests-with-external-dependencies">Skipping tests with external dependencies</a></li>
    </ul>
  </li>
  <li><a href="https://github.com/KratosMultiphysics/Kratos/wiki/How-to-create-unitary-tests#c">C++</a>:
    <ul>
      <li><a href="https://github.com/KratosMultiphysics/Kratos/wiki/How-to-create-unitary-tests#how-to-run-tests-1">How to run test</a></li>
      <li><a href="https://github.com/KratosMultiphysics/Kratos/wiki/How-to-create-unitary-tests#general-structure-1">Basic structure</a></li>
      <li><a href="https://github.com/KratosMultiphysics/Kratos/wiki/How-to-create-unitary-tests#some-common-commands">Some common commands</a></li>
    </ul>
  </li>
</ul>

<h1 id="overview">Overview</h1>

<p><em>Kratos Multiphysics</em> has a mechanism to automatically test your code called <code class="language-plaintext highlighter-rouge">KratosUnittest</code>. If you are familiar with Python, this module is basically an extension of <a href="https://docs.python.org/2/library/unittest.html">Unittest</a>  and you can expect to find every functionality that exists there in <code class="language-plaintext highlighter-rouge">KratosUnittest</code> as well.</p>

<p>In order for your application to be robust, it is recommended to add Unittests to it. Here we present some guidelines on how to do it.</p>

<h1 id="python">Python</h1>

<h2 id="how-to-run-tests">How to run tests</h2>

<p>Kratos unittest are executed using the <code class="language-plaintext highlighter-rouge">run_tests.py</code> script located in the <code class="language-plaintext highlighter-rouge">kratos/kratos/python_scripts</code> folder.</p>

<p>Usage is the following:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python run_tests.py
</code></pre></div></div>

<p>you can specify the following options:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">-l</span>,--level:        Select the suit. Values: <span class="s2">"All"</span>, <span class="s2">"Nightly"</span>, <span class="s2">"Small"</span><span class="o">(</span>default<span class="o">)</span>
<span class="nt">-v</span>,--verbosity:    Select the verbosity level of the output. Values: 0, 1 <span class="o">(</span>default<span class="o">)</span> , 2
<span class="nt">-a</span>,--applications: List of applications to run separated by <span class="s2">":"</span><span class="nb">.</span> For example <span class="s2">"-a KratosKore:IncompressibleFluidApplication"</span>
                   All applications compiled are run by default.
</code></pre></div></div>

<h2 id="basic-structure">Basic structure</h2>

<p>Tests are defined in a python script. To keep tests organized we recommend you to create the tests in your “application/tests/” directory.</p>

<p>Tests are organized in suites. Suites are a collection of tests that will be run together as a package. In <em>Kratos</em>, we define three basic suites:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">All</code>: which should contain all the tests</li>
  <li><code class="language-plaintext highlighter-rouge">Nightly</code>: which should contain a set of tests that could be executed in less than 10 min</li>
  <li><code class="language-plaintext highlighter-rouge">Small</code>: which should contain a set of tests that could be executed in less than 1 min</li>
</ul>

<p>All applications should implement those packages as they can be automatically run, for example in the <code class="language-plaintext highlighter-rouge">Nightly</code> runs. In order to add tests you should create at least a couple of files, one to define the tests and one to define the suites:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s2">"application/tests/test_NAME_OF_OUR_APPLICATION.py"</span>
</code></pre></div></div>

<p>for example:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kratos/applications/example_application/tests/test_example_application.py
</code></pre></div></div>

<h2 id="general-structure">General structure</h2>

<p>This file will define the suites to run the tests. We define three different levels of suites in kratos:</p>

<ul>
  <li><strong>All</strong>: which should contain all the tests.</li>
  <li><strong>Nightly</strong>: which should contain a set of tests that could be executed in less than 10 min.</li>
  <li><strong>Small</strong>: which should contain a set of tests that could be executed in less than 1 min.</li>
</ul>

<p>In order to add a test to some of these suites, one can do it as shown in this example:</p>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span><span class="p">,</span> <span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span>

<span class="c1"># import Kratos
</span><span class="kn">from</span> <span class="nn">KratosMultiphysics</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># Import Kratos "wrapper" for unittests
</span><span class="kn">import</span> <span class="nn">KratosMultiphysics.KratosUnittest</span> <span class="k">as</span> <span class="n">KratosUnittest</span>

<span class="c1"># Import the tests o test_classes to create the suites. For example
</span><span class="kn">from</span> <span class="nn">test_my_app_example_tests_1</span> <span class="kn">import</span> <span class="n">TestCase1</span> <span class="k">as</span> <span class="n">TestCase1</span>
<span class="kn">from</span> <span class="nn">test_my_app_example_tests_2</span> <span class="kn">import</span> <span class="n">TestCase2</span> <span class="k">as</span> <span class="n">TestCase2</span>

<span class="k">def</span> <span class="nf">AssembleTestSuites</span><span class="p">():</span>
     <span class="n">Populates</span> <span class="n">the</span> <span class="n">test</span> <span class="n">suites</span> <span class="n">to</span> <span class="n">run</span><span class="p">.</span>
    
    <span class="n">Populates</span> <span class="n">the</span> <span class="n">test</span> <span class="n">suites</span> <span class="n">to</span> <span class="n">run</span><span class="p">.</span> <span class="n">At</span> <span class="n">least</span><span class="p">,</span> <span class="n">it</span> <span class="n">should</span> <span class="n">populate</span> <span class="n">the</span> <span class="n">suites</span><span class="p">:</span>
    <span class="s">"small"</span><span class="p">,</span> <span class="s">"nightly"</span> <span class="ow">and</span> <span class="s">"all"</span>
    
    <span class="n">Return</span>
    <span class="o">------</span>
    
    <span class="n">suites</span><span class="p">:</span> <span class="n">A</span> <span class="n">dictionary</span> <span class="n">of</span> <span class="n">suites</span>
        <span class="n">The</span> <span class="nb">set</span> <span class="n">of</span> <span class="n">suites</span> <span class="k">with</span> <span class="n">its</span> <span class="n">test_cases</span> <span class="n">added</span><span class="p">.</span>
    
    
    <span class="c1"># Get the already defined suites
</span>    <span class="n">suites</span> <span class="o">=</span> <span class="n">KratosUnittest</span><span class="p">.</span><span class="n">KratosSuites</span>
    
    <span class="c1"># Get the small suite and populate it with some tests from TestCase1 and TestCase2
</span>    <span class="n">smallSuite</span> <span class="o">=</span> <span class="n">suites</span><span class="p">[</span><span class="s">'small'</span><span class="p">]</span>
    <span class="n">smallSuite</span><span class="p">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">TestCase1</span><span class="p">(</span><span class="s">'test_example_small_boo_1'</span><span class="p">))</span>
    <span class="n">smallSuite</span><span class="p">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">TestCase2</span><span class="p">(</span><span class="s">'test_example_small_foo_1'</span><span class="p">))</span>
    
    <span class="c1"># Get the small suite and populate it with some tests from TestCase1 and TestCase2
</span>    <span class="n">nightSuite</span> <span class="o">=</span> <span class="n">suites</span><span class="p">[</span><span class="s">'nightly'</span><span class="p">]</span>
    <span class="n">smallSuite</span><span class="p">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">TestCase1</span><span class="p">(</span><span class="s">'test_example_nightly_boo_1'</span><span class="p">))</span>
    <span class="n">smallSuite</span><span class="p">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">TestCase1</span><span class="p">(</span><span class="s">'test_example_nightly_boo_2'</span><span class="p">))</span>
    <span class="n">smallSuite</span><span class="p">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">TestCase2</span><span class="p">(</span><span class="s">'test_example_nightly_foo_1'</span><span class="p">))</span>
    
    <span class="c1"># Get the small suite and populate it with all tests from TestCase1 and TestCase2
</span>    <span class="n">allSuite</span> <span class="o">=</span> <span class="n">suites</span><span class="p">[</span><span class="s">'all'</span><span class="p">]</span>
    <span class="n">allSuite</span><span class="p">.</span><span class="n">addTests</span><span class="p">(</span>
        <span class="n">KratosUnittest</span><span class="p">.</span><span class="n">TestLoader</span><span class="p">().</span><span class="n">loadTestsFromTestCases</span><span class="p">([</span>
            <span class="n">TestCase1</span><span class="p">,</span>
            <span class="n">TestCase2</span>
        <span class="p">])</span>
    <span class="p">)</span>
    
    <span class="c1"># Return the suites
</span>    <span class="k">return</span> <span class="n">suites</span>
    
<span class="c1"># The main function executes the tests
</span><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">KratosUnittest</span><span class="p">.</span><span class="n">runTests</span><span class="p">(</span><span class="n">AssembleTestSuites</span><span class="p">())</span>
</code></pre></div></div>

<h2 id="structure-for-examples">Structure for examples</h2>

<p>Examples are cases that test your code/application, but are more complex than the unitary tests, take longer and involve many functionalities. A typical example is a Finite Element calculation of few time steps and a few elements. In order to compute some examples (the examples that used to be located in the folder <code class="language-plaintext highlighter-rouge">test_examples</code>) some additional considerations must to be taken into account. These considerations can be observed in the following example that is located in the StructuralMechanicsApplication/tests. In order to compute a dynamic test (<em>Bossak</em> and <em>Newmark</em>) and a patch test (with bending and membrane behaviours), the following files has been considered, first the main file, which will be the one launched.</p>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># import Kratos
</span><span class="kn">import</span> <span class="nn">KratosMultiphysics</span> 
<span class="kn">import</span> <span class="nn">KratosMultiphysics.ExternalSolversApplication</span> 
<span class="kn">import</span> <span class="nn">KratosMultiphysics.SolidMechanicsApplication</span> 
<span class="kn">import</span> <span class="nn">KratosMultiphysics.StructuralMechanicsApplication</span> 

<span class="c1"># Import Kratos "wrapper" for unittests
</span><span class="kn">import</span> <span class="nn">KratosMultiphysics.KratosUnittest</span> <span class="k">as</span> <span class="n">KratosUnittest</span>

<span class="c1"># Import the tests o test_classes to create the suits
## SMALL TESTS
</span><span class="kn">from</span> <span class="nn">SmallTests</span> <span class="kn">import</span> <span class="n">SimpleMeshMovingTest</span> <span class="k">as</span> <span class="n">TSimpleMeshMovingTest</span>
<span class="kn">from</span> <span class="nn">SmallTests</span> <span class="kn">import</span> <span class="n">DynamicBossakTests</span> <span class="k">as</span> <span class="n">TDynamicBossakTests</span>
<span class="kn">from</span> <span class="nn">SmallTests</span> <span class="kn">import</span> <span class="n">DynamicNewmarkTests</span> <span class="k">as</span> <span class="n">TDynamicNewmarkTests</span>
<span class="kn">from</span> <span class="nn">SmallTests</span> <span class="kn">import</span> <span class="n">SprismMembranePatchTests</span> <span class="k">as</span> <span class="n">TSprismMembranePatchTests</span>
<span class="kn">from</span> <span class="nn">SmallTests</span> <span class="kn">import</span> <span class="n">SprismBendingPatchTests</span> <span class="k">as</span> <span class="n">TSprismBendingPatchTests</span>
<span class="kn">from</span> <span class="nn">SmallTests</span> <span class="kn">import</span> <span class="n">ShellQ4ThickBendingRollUpTests</span> <span class="k">as</span> <span class="n">TShellQ4ThickBendingRollUpTests</span>
<span class="kn">from</span> <span class="nn">SmallTests</span> <span class="kn">import</span> <span class="n">ShellQ4ThickDrillingRollUpTests</span> <span class="k">as</span> <span class="n">TShellQ4ThickDrillingRollUpTests</span>
<span class="kn">from</span> <span class="nn">SmallTests</span> <span class="kn">import</span> <span class="n">ShellT3ThinBendingRollUpTests</span> <span class="k">as</span> <span class="n">TShellT3ThinBendingRollUpTests</span>
<span class="kn">from</span> <span class="nn">SmallTests</span> <span class="kn">import</span> <span class="n">ShellT3ThinDrillingRollUpTests</span> <span class="k">as</span> <span class="n">TShellT3ThinDrillingRollUpTests</span>
<span class="kn">from</span> <span class="nn">SmallTests</span> <span class="kn">import</span> <span class="n">EigenQ4Thick2x2PlateTests</span> <span class="k">as</span> <span class="n">TEigenQ4Thick2x2PlateTests</span>
<span class="kn">from</span> <span class="nn">SmallTests</span> <span class="kn">import</span> <span class="n">EigenTL3D8NCubeTests</span> <span class="k">as</span> <span class="n">TEigenTL3D8NCubeTests</span>

<span class="c1">## NIGTHLY TESTS
</span><span class="kn">from</span> <span class="nn">NightlyTests</span> <span class="kn">import</span> <span class="n">ShellT3IsotropicScordelisTests</span> <span class="k">as</span> <span class="n">TShellT3IsotropicScordelisTests</span>

<span class="c1">## VALIDATION TESTS
</span><span class="kn">from</span> <span class="nn">ValidationTests</span> <span class="kn">import</span> <span class="n">SprismPanTests</span> <span class="k">as</span> <span class="n">TSprismPanTests</span>

<span class="k">def</span> <span class="nf">AssambleTestSuites</span><span class="p">():</span>
    <span class="s">''' Populates the test suites to run.

    Populates the test suites to run. At least, it should pupulate the suites:
    "small", "nighlty" and "all"

    Return
    ------

    suites: A dictionary of suites
        The set of suites with its test_cases added.
    '''</span>
    <span class="n">suites</span> <span class="o">=</span> <span class="n">KratosUnittest</span><span class="p">.</span><span class="n">KratosSuites</span>

    <span class="c1"># Create a test suit with the selected tests (Small tests):
</span>    <span class="n">smallSuite</span> <span class="o">=</span> <span class="n">suites</span><span class="p">[</span><span class="s">'small'</span><span class="p">]</span>
    <span class="n">smallSuite</span><span class="p">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">TSimpleMeshMovingTest</span><span class="p">(</span><span class="s">'test_execution'</span><span class="p">))</span>
    <span class="n">smallSuite</span><span class="p">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">TDynamicBossakTests</span><span class="p">(</span><span class="s">'test_execution'</span><span class="p">))</span>
    <span class="n">smallSuite</span><span class="p">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">TDynamicNewmarkTests</span><span class="p">(</span><span class="s">'test_execution'</span><span class="p">))</span>
    <span class="n">smallSuite</span><span class="p">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">TSprismMembranePatchTests</span><span class="p">(</span><span class="s">'test_execution'</span><span class="p">))</span>
    <span class="n">smallSuite</span><span class="p">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">TSprismBendingPatchTests</span><span class="p">(</span><span class="s">'test_execution'</span><span class="p">))</span>
    <span class="n">smallSuite</span><span class="p">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">TShellQ4ThickBendingRollUpTests</span><span class="p">(</span><span class="s">'test_execution'</span><span class="p">))</span>
    <span class="n">smallSuite</span><span class="p">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">TShellQ4ThickDrillingRollUpTests</span><span class="p">(</span><span class="s">'test_execution'</span><span class="p">))</span>
    <span class="n">smallSuite</span><span class="p">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">TShellT3ThinBendingRollUpTests</span><span class="p">(</span><span class="s">'test_execution'</span><span class="p">))</span>
    <span class="n">smallSuite</span><span class="p">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">TShellT3ThinDrillingRollUpTests</span><span class="p">(</span><span class="s">'test_execution'</span><span class="p">))</span>
    <span class="n">smallSuite</span><span class="p">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">TEigenQ4Thick2x2PlateTests</span><span class="p">(</span><span class="s">'test_execution'</span><span class="p">))</span>
    <span class="n">smallSuite</span><span class="p">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">TEigenTL3D8NCubeTests</span><span class="p">(</span><span class="s">'test_execution'</span><span class="p">))</span>

    <span class="c1"># Create a test suit with the selected tests plus all small tests
</span>    <span class="n">nightSuite</span> <span class="o">=</span> <span class="n">suites</span><span class="p">[</span><span class="s">'nightly'</span><span class="p">]</span>
    <span class="n">nightSuite</span><span class="p">.</span><span class="n">addTests</span><span class="p">(</span><span class="n">smallSuite</span><span class="p">)</span>
    <span class="n">nightSuite</span><span class="p">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">TShellT3IsotropicScordelisTests</span><span class="p">(</span><span class="s">'test_execution'</span><span class="p">))</span>
    
    <span class="c1"># For very long tests that should not be in nighly and you can use to validate 
</span>    <span class="n">validationSuite</span> <span class="o">=</span> <span class="n">suites</span><span class="p">[</span><span class="s">'validation'</span><span class="p">]</span>
    <span class="n">validationSuite</span><span class="p">.</span><span class="n">addTest</span><span class="p">(</span><span class="n">TSprismPanTests</span><span class="p">(</span><span class="s">'test_execution'</span><span class="p">))</span>

    <span class="c1"># Create a test suit that contains all the tests:
</span>    <span class="n">allSuite</span> <span class="o">=</span> <span class="n">suites</span><span class="p">[</span><span class="s">'all'</span><span class="p">]</span>
    <span class="n">allSuite</span><span class="p">.</span><span class="n">addTests</span><span class="p">(</span>
        <span class="n">KratosUnittest</span><span class="p">.</span><span class="n">TestLoader</span><span class="p">().</span><span class="n">loadTestsFromTestCases</span><span class="p">([</span>
            <span class="n">TSimpleMeshMovingTest</span><span class="p">,</span>
            <span class="n">TDynamicBossakTests</span><span class="p">,</span>
            <span class="n">TDynamicNewmarkTests</span><span class="p">,</span>
            <span class="n">TSprismMembranePatchTests</span><span class="p">,</span>
            <span class="n">TSprismBendingPatchTests</span><span class="p">,</span>
            <span class="n">TShellQ4ThickBendingRollUpTests</span><span class="p">,</span>
            <span class="n">TShellQ4ThickDrillingRollUpTests</span><span class="p">,</span>
            <span class="n">TShellT3ThinBendingRollUpTests</span><span class="p">,</span>
            <span class="n">TShellT3ThinDrillingRollUpTests</span><span class="p">,</span>
            <span class="n">TShellT3IsotropicScordelisTests</span>
        <span class="p">])</span>
    <span class="p">)</span>
    
    <span class="k">if</span><span class="p">(</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">KratosMultiphysics</span><span class="p">.</span><span class="n">ExternalSolversApplication</span><span class="p">,</span>  <span class="s">"FEASTSolver"</span><span class="p">)</span> <span class="p">):</span>
        <span class="n">allSuite</span><span class="p">.</span><span class="n">addTests</span><span class="p">(</span>
            <span class="n">KratosUnittest</span><span class="p">.</span><span class="n">TestLoader</span><span class="p">().</span><span class="n">loadTestsFromTestCases</span><span class="p">([</span>
                <span class="n">TEigenQ4Thick2x2PlateTests</span><span class="p">,</span>
                <span class="n">TEigenTL3D8NCubeTests</span>
            <span class="p">])</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"FEASTSolver solver is not included in the compilation of the External Solvers Application"</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">suites</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">KratosUnittest</span><span class="p">.</span><span class="n">runTests</span><span class="p">(</span><span class="n">AssambleTestSuites</span><span class="p">())</span>
</code></pre></div></div>

<p>The following can be added as commentary to clarify what the script is doing:</p>

<ul>
  <li>The tests are added using the string <code class="language-plaintext highlighter-rouge">test_nametest</code> from the imported class.</li>
  <li>Nightly should consider at least all the small tests, in the same way all should consider all the nightly tests.</li>
</ul>

<p>The following corresponds to the script that contains the test examples:</p>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># Import Kratos
</span><span class="kn">from</span> <span class="nn">KratosMultiphysics</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># Import KratosUnittest
</span><span class="kn">import</span> <span class="nn">KratosMultiphysics.KratosUnittest</span> <span class="k">as</span> <span class="n">KratosUnittest</span>
<span class="kn">import</span> <span class="nn">Kratos_Execute_Solid_Test</span> <span class="k">as</span> <span class="n">Execute_Test</span>

<span class="c1"># This utility will control the execution scope in case we need to acces files or we depend
# on specific relative locations of the files.
</span>
<span class="c1"># TODO: Should we move this to KratosUnittest?
</span><span class="k">class</span> <span class="nc">controlledExecutionScope</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scope</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">currentPath</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">scope</span> <span class="o">=</span> <span class="n">scope</span>

    <span class="k">def</span> <span class="nf">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">os</span><span class="p">.</span><span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">scope</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
        <span class="n">os</span><span class="p">.</span><span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">currentPath</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">StructuralMechanichsTestFactory</span><span class="p">(</span><span class="n">KratosUnittest</span><span class="p">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Within this location context:
</span>        <span class="k">with</span> <span class="n">controlledExecutionScope</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">__file__</span><span class="p">))):</span>
            <span class="c1"># Initialize GiD  I/O
</span>            <span class="n">parameter_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">file_name</span> <span class="o">+</span> <span class="s">"_parameters.json"</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span>
            <span class="n">ProjectParameters</span> <span class="o">=</span> <span class="n">Parameters</span><span class="p">(</span><span class="n">parameter_file</span><span class="p">.</span><span class="n">read</span><span class="p">())</span>

            <span class="c1"># Creating the model part
</span>            <span class="bp">self</span><span class="p">.</span><span class="n">test</span> <span class="o">=</span> <span class="n">Execute_Test</span><span class="p">.</span><span class="n">Kratos_Execute_Test</span><span class="p">(</span><span class="n">ProjectParameters</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_execution</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Within this location context:
</span>        <span class="k">with</span> <span class="n">controlledExecutionScope</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">__file__</span><span class="p">))):</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">test</span><span class="p">.</span><span class="n">Solve</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>


<span class="k">class</span> <span class="nc">SimpleMeshMovingTest</span><span class="p">(</span><span class="n">StructuralMechanichsTestFactory</span><span class="p">):</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="s">"mesh_moving_test/simple_mesh_moving_test"</span>


<span class="k">class</span> <span class="nc">DynamicBossakTests</span><span class="p">(</span><span class="n">StructuralMechanichsTestFactory</span><span class="p">):</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="s">"dynamic_test/dynamic_bossak_test"</span>


<span class="k">class</span> <span class="nc">DynamicNewmarkTests</span><span class="p">(</span><span class="n">StructuralMechanichsTestFactory</span><span class="p">):</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="s">"dynamic_test/dynamic_newmark_test"</span>


<span class="k">class</span> <span class="nc">SprismMembranePatchTests</span><span class="p">(</span><span class="n">StructuralMechanichsTestFactory</span><span class="p">):</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="s">"sprism_test/patch_membrane_test"</span>


<span class="k">class</span> <span class="nc">SprismBendingPatchTests</span><span class="p">(</span><span class="n">StructuralMechanichsTestFactory</span><span class="p">):</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="s">"sprism_test/patch_bending_test"</span>


<span class="k">class</span> <span class="nc">ShellQ4ThickBendingRollUpTests</span><span class="p">(</span><span class="n">StructuralMechanichsTestFactory</span><span class="p">):</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="s">"shell_test/Shell_Q4_Thick__BendingRollUp_test"</span>


<span class="k">class</span> <span class="nc">ShellQ4ThickDrillingRollUpTests</span><span class="p">(</span><span class="n">StructuralMechanichsTestFactory</span><span class="p">):</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="s">"shell_test/Shell_Q4_Thick__DrillingRollUp_test"</span>


<span class="k">class</span> <span class="nc">ShellT3ThinBendingRollUpTests</span><span class="p">(</span><span class="n">StructuralMechanichsTestFactory</span><span class="p">):</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="s">"shell_test/Shell_T3_Thin__BendingRollUp_test"</span>


<span class="k">class</span> <span class="nc">ShellT3ThinDrillingRollUpTests</span><span class="p">(</span><span class="n">StructuralMechanichsTestFactory</span><span class="p">):</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="s">"shell_test/Shell_T3_Thin__DrillingRollUp_test"</span>


<span class="k">class</span> <span class="nc">EigenQ4Thick2x2PlateTests</span><span class="p">(</span><span class="n">StructuralMechanichsTestFactory</span><span class="p">):</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="s">"eigen_test/Eigen_Q4_Thick_2x2_Plate_test"</span>


<span class="k">class</span> <span class="nc">EigenTL3D8NCubeTests</span><span class="p">(</span><span class="n">StructuralMechanichsTestFactory</span><span class="p">):</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="s">"eigen_test/Eigen_TL_3D8N_Cube_test"</span>

</code></pre></div></div>

<p>This file calls the main file, which is very similar to the one used by the GiD’s problem type:</p>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span><span class="p">,</span> <span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span>  <span class="c1"># makes KratosMultiphysics backward compatible with python 2.6 and 2.7
</span>
<span class="kn">from</span> <span class="nn">KratosMultiphysics</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">KratosMultiphysics.SolidMechanicsApplication</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">KratosMultiphysics.StructuralMechanicsApplication</span> <span class="kn">import</span> <span class="o">*</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">process_factory</span>

<span class="k">class</span> <span class="nc">Kratos_Execute_Test</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ProjectParameters</span><span class="p">):</span>

        <span class="bp">self</span><span class="p">.</span><span class="n">ProjectParameters</span> <span class="o">=</span> <span class="n">ProjectParameters</span>

        <span class="bp">self</span><span class="p">.</span><span class="n">main_model_part</span> <span class="o">=</span> <span class="n">ModelPart</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">ProjectParameters</span><span class="p">[</span><span class="s">"problem_data"</span><span class="p">][</span><span class="s">"model_part_name"</span><span class="p">].</span><span class="n">GetString</span><span class="p">())</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">main_model_part</span><span class="p">.</span><span class="n">ProcessInfo</span><span class="p">.</span><span class="n">SetValue</span><span class="p">(</span><span class="n">DOMAIN_SIZE</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">ProjectParameters</span><span class="p">[</span><span class="s">"problem_data"</span><span class="p">][</span><span class="s">"domain_size"</span><span class="p">].</span><span class="n">GetInt</span><span class="p">())</span>

        <span class="bp">self</span><span class="p">.</span><span class="n">Model</span> <span class="o">=</span> <span class="p">{</span><span class="bp">self</span><span class="p">.</span><span class="n">ProjectParameters</span><span class="p">[</span><span class="s">"problem_data"</span><span class="p">][</span><span class="s">"model_part_name"</span><span class="p">].</span><span class="n">GetString</span><span class="p">():</span> <span class="bp">self</span><span class="p">.</span><span class="n">main_model_part</span><span class="p">}</span>

        <span class="c1"># Construct the solver (main setting methods are located in the solver_module)
</span>        <span class="n">solver_module</span> <span class="o">=</span> <span class="nb">__import__</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">ProjectParameters</span><span class="p">[</span><span class="s">"solver_settings"</span><span class="p">][</span><span class="s">"solver_type"</span><span class="p">].</span><span class="n">GetString</span><span class="p">())</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">solver</span> <span class="o">=</span> <span class="n">solver_module</span><span class="p">.</span><span class="n">CreateSolver</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">main_model_part</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">ProjectParameters</span><span class="p">[</span><span class="s">"solver_settings"</span><span class="p">])</span>

        <span class="c1"># Add variables (always before importing the model part) (it must be integrated in the ImportModelPart)
</span>        <span class="c1"># If we integrate it in the model part we cannot use combined solvers
</span>        <span class="bp">self</span><span class="p">.</span><span class="n">solver</span><span class="p">.</span><span class="n">AddVariables</span><span class="p">()</span>

        <span class="c1"># Read model_part (note: the buffer_size is set here) (restart can be read here)
</span>        <span class="bp">self</span><span class="p">.</span><span class="n">solver</span><span class="p">.</span><span class="n">ImportModelPart</span><span class="p">()</span>

        <span class="c1"># Add dofs (always after importing the model part) (it must be integrated in the ImportModelPart)
</span>        <span class="c1"># If we integrate it in the model part we cannot use combined solvers
</span>        <span class="bp">self</span><span class="p">.</span><span class="n">solver</span><span class="p">.</span><span class="n">AddDofs</span><span class="p">()</span>

        <span class="c1"># Build sub_model_parts or submeshes (rearrange parts for the application of custom processes)
</span>        <span class="c1"># #Get the list of the submodel part in the object Model
</span>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">ProjectParameters</span><span class="p">[</span><span class="s">"solver_settings"</span><span class="p">][</span><span class="s">"processes_sub_model_part_list"</span><span class="p">].</span><span class="n">size</span><span class="p">()):</span>
            <span class="n">part_name</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">ProjectParameters</span><span class="p">[</span><span class="s">"solver_settings"</span><span class="p">][</span><span class="s">"processes_sub_model_part_list"</span><span class="p">][</span><span class="n">i</span><span class="p">].</span><span class="n">GetString</span><span class="p">()</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">Model</span><span class="p">.</span><span class="n">update</span><span class="p">({</span><span class="n">part_name</span><span class="p">:</span> <span class="bp">self</span><span class="p">.</span><span class="n">main_model_part</span><span class="p">.</span><span class="n">GetSubModelPart</span><span class="p">(</span><span class="n">part_name</span><span class="p">)})</span>

        <span class="c1"># Obtain the list of the processes to be applied
</span>        <span class="bp">self</span><span class="p">.</span><span class="n">list_of_processes</span> <span class="o">=</span> <span class="n">process_factory</span><span class="p">.</span><span class="n">KratosProcessFactory</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">Model</span><span class="p">).</span><span class="n">ConstructListOfProcesses</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">ProjectParameters</span><span class="p">[</span><span class="s">"constraints_process_list"</span><span class="p">])</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">list_of_processes</span> <span class="o">+=</span> <span class="n">process_factory</span><span class="p">.</span><span class="n">KratosProcessFactory</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">Model</span><span class="p">).</span><span class="n">ConstructListOfProcesses</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">ProjectParameters</span><span class="p">[</span><span class="s">"loads_process_list"</span><span class="p">])</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">list_of_processes</span> <span class="o">+=</span> <span class="n">process_factory</span><span class="p">.</span><span class="n">KratosProcessFactory</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">Model</span><span class="p">).</span><span class="n">ConstructListOfProcesses</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">ProjectParameters</span><span class="p">[</span><span class="s">"list_other_processes"</span><span class="p">])</span>

        <span class="k">for</span> <span class="n">process</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">list_of_processes</span><span class="p">:</span>
            <span class="n">process</span><span class="p">.</span><span class="n">ExecuteInitialize</span><span class="p">()</span>

        <span class="c1"># ### START SOLUTION ####
</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">computing_model_part</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">solver</span><span class="p">.</span><span class="n">GetComputingModelPart</span><span class="p">()</span>

        <span class="c1"># ### Output settings start ####
</span>        <span class="bp">self</span><span class="p">.</span><span class="n">problem_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">problem_name</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">ProjectParameters</span><span class="p">[</span><span class="s">"problem_data"</span><span class="p">][</span><span class="s">"problem_name"</span><span class="p">].</span><span class="n">GetString</span><span class="p">()</span>

        <span class="c1"># ### Output settings start ####
</span>        <span class="bp">self</span><span class="p">.</span><span class="n">output_post</span> <span class="o">=</span> <span class="n">ProjectParameters</span><span class="p">.</span><span class="n">Has</span><span class="p">(</span><span class="s">"output_configuration"</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">output_post</span> <span class="o">==</span> <span class="bp">True</span><span class="p">):</span>
            <span class="kn">from</span> <span class="nn">gid_output_process</span> <span class="kn">import</span> <span class="n">GiDOutputProcess</span>
            <span class="n">output_settings</span> <span class="o">=</span> <span class="n">ProjectParameters</span><span class="p">[</span><span class="s">"output_configuration"</span><span class="p">]</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">gid_output</span> <span class="o">=</span> <span class="n">GiDOutputProcess</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">computing_model_part</span><span class="p">,</span>
                                               <span class="bp">self</span><span class="p">.</span><span class="n">problem_name</span><span class="p">,</span>
                                               <span class="n">output_settings</span><span class="p">)</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">gid_output</span><span class="p">.</span><span class="n">ExecuteInitialize</span><span class="p">()</span>
            
        <span class="c1"># Sets strategies, builders, linear solvers, schemes and solving info, and fills the buffer
</span>        <span class="bp">self</span><span class="p">.</span><span class="n">solver</span><span class="p">.</span><span class="n">Initialize</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">solver</span><span class="p">.</span><span class="n">SetEchoLevel</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># Avoid to print anything 
</span>        
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">output_post</span> <span class="o">==</span> <span class="bp">True</span><span class="p">):</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">gid_output</span><span class="p">.</span><span class="n">ExecuteBeforeSolutionLoop</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">Solve</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">process</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">list_of_processes</span><span class="p">:</span>
            <span class="n">process</span><span class="p">.</span><span class="n">ExecuteBeforeSolutionLoop</span><span class="p">()</span>

        <span class="c1"># #Stepping and time settings (get from process info or solving info)
</span>        <span class="c1"># Delta time
</span>        <span class="n">delta_time</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">ProjectParameters</span><span class="p">[</span><span class="s">"problem_data"</span><span class="p">][</span><span class="s">"time_step"</span><span class="p">].</span><span class="n">GetDouble</span><span class="p">()</span>
        <span class="c1"># Start step
</span>        <span class="bp">self</span><span class="p">.</span><span class="n">main_model_part</span><span class="p">.</span><span class="n">ProcessInfo</span><span class="p">[</span><span class="n">TIME_STEPS</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># Start time
</span>        <span class="n">time</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">ProjectParameters</span><span class="p">[</span><span class="s">"problem_data"</span><span class="p">][</span><span class="s">"start_time"</span><span class="p">].</span><span class="n">GetDouble</span><span class="p">()</span>
        <span class="c1"># End time
</span>        <span class="n">end_time</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">ProjectParameters</span><span class="p">[</span><span class="s">"problem_data"</span><span class="p">][</span><span class="s">"end_time"</span><span class="p">].</span><span class="n">GetDouble</span><span class="p">()</span>

        <span class="c1"># Solving the problem (time integration)
</span>        <span class="k">while</span><span class="p">(</span><span class="n">time</span> <span class="o">&lt;=</span> <span class="n">end_time</span><span class="p">):</span>
            <span class="n">time</span> <span class="o">=</span> <span class="n">time</span> <span class="o">+</span> <span class="n">delta_time</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">main_model_part</span><span class="p">.</span><span class="n">ProcessInfo</span><span class="p">[</span><span class="n">TIME_STEPS</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">main_model_part</span><span class="p">.</span><span class="n">CloneTimeStep</span><span class="p">(</span><span class="n">time</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">process</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">list_of_processes</span><span class="p">:</span>
                <span class="n">process</span><span class="p">.</span><span class="n">ExecuteInitializeSolutionStep</span><span class="p">()</span>
                
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">output_post</span> <span class="o">==</span> <span class="bp">True</span><span class="p">):</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">gid_output</span><span class="p">.</span><span class="n">ExecuteInitializeSolutionStep</span><span class="p">()</span>
                        
            <span class="bp">self</span><span class="p">.</span><span class="n">solver</span><span class="p">.</span><span class="n">Solve</span><span class="p">()</span>
            
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">output_post</span> <span class="o">==</span> <span class="bp">True</span><span class="p">):</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">gid_output</span><span class="p">.</span><span class="n">ExecuteFinalizeSolutionStep</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">process</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">list_of_processes</span><span class="p">:</span>
                <span class="n">process</span><span class="p">.</span><span class="n">ExecuteFinalizeSolutionStep</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">process</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">list_of_processes</span><span class="p">:</span>
                <span class="n">process</span><span class="p">.</span><span class="n">ExecuteBeforeOutputStep</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">process</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">list_of_processes</span><span class="p">:</span>
                <span class="n">process</span><span class="p">.</span><span class="n">ExecuteAfterOutputStep</span><span class="p">()</span>

            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">output_post</span> <span class="o">==</span> <span class="bp">True</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">gid_output</span><span class="p">.</span><span class="n">IsOutputStep</span><span class="p">():</span>
                    <span class="bp">self</span><span class="p">.</span><span class="n">gid_output</span><span class="p">.</span><span class="n">PrintOutput</span><span class="p">()</span>

        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">output_post</span> <span class="o">==</span> <span class="bp">True</span><span class="p">):</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">gid_output</span><span class="p">.</span><span class="n">ExecuteFinalize</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">process</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">list_of_processes</span><span class="p">:</span>
            <span class="n">process</span><span class="p">.</span><span class="n">ExecuteFinalize</span><span class="p">()</span>
</code></pre></div></div>

<p>The main is always the same, just the processes from the project parameters inside the <code class="language-plaintext highlighter-rouge">.json</code> are changed, look for example the <code class="language-plaintext highlighter-rouge">.json</code> that corresponds to the Bossak dynamic test:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"problem_data"</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"problem_name"</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class="s2">"dynamic_test"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"model_part_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Structure"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"domain_size"</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"time_step"</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="mf">0.001</span><span class="p">,</span><span class="w">
        </span><span class="nl">"start_time"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="mf">0.001</span><span class="p">,</span><span class="w">
        </span><span class="nl">"end_time"</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="mf">0.10</span><span class="p">,</span><span class="w">
        </span><span class="nl">"echo_level"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"solver_settings"</span><span class="w">          </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"solver_type"</span><span class="w">                        </span><span class="p">:</span><span class="w"> </span><span class="s2">"solid_mechanics_implicit_dynamic_solver"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"echo_level"</span><span class="w">                         </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"solution_type"</span><span class="w">                      </span><span class="p">:</span><span class="w"> </span><span class="s2">"Dynamic"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"time_integration_method"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="s2">"Implicit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"scheme_type"</span><span class="w">                        </span><span class="p">:</span><span class="w"> </span><span class="s2">"Bossak"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"model_import_settings"</span><span class="w">              </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"input_type"</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class="s2">"mdpa"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"input_filename"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"dynamic_test/dynamic_test"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"line_search"</span><span class="w">                        </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"convergence_criterion"</span><span class="w">              </span><span class="p">:</span><span class="w"> </span><span class="s2">"Residual_criterion"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"displacement_relative_tolerance"</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
        </span><span class="nl">"displacement_absolute_tolerance"</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class="mi">1e-9</span><span class="p">,</span><span class="w">
        </span><span class="nl">"residual_relative_tolerance"</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
        </span><span class="nl">"residual_absolute_tolerance"</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="mi">1e-9</span><span class="p">,</span><span class="w">
        </span><span class="nl">"max_iteration"</span><span class="w">                      </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="nl">"linear_solver_settings"</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"solver_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SuperLUSolver"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"max_iteration"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
                </span><span class="nl">"tolerance"</span><span class="p">:</span><span class="w"> </span><span class="mi">1e-9</span><span class="p">,</span><span class="w">
                </span><span class="nl">"scaling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"verbosity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"problem_domain_sub_model_part_list"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Parts_Parts_Auto1"</span><span class="p">],</span><span class="w">
        </span><span class="nl">"processes_sub_model_part_list"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"DISPLACEMENT_Displacement_Auto1"</span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"constraints_process_list"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"python_module"</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="s2">"impose_vector_value_by_components_process"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"kratos_module"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"KratosMultiphysics"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"help"</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="s2">"This process fixes the selected components of a given vector variable"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"process_name"</span><span class="w">          </span><span class="p">:</span><span class="w"> </span><span class="s2">"ImposeVectorValueByComponentsProcess"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Parameters"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"mesh_id"</span><span class="w">         </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"model_part_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"DISPLACEMENT_Displacement_Auto1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"variable_name"</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="s2">"DISPLACEMENT"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is_fixed_x"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is_fixed_y"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is_fixed_z"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"value"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"loads_process_list"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"list_other_processes"</span><span class="w"> </span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"python_module"</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="s2">"from_json_check_result_process"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"kratos_module"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"KratosMultiphysics"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"help"</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"process_name"</span><span class="w">          </span><span class="p">:</span><span class="w"> </span><span class="s2">"FromJsonCheckResultProcess"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Parameters"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"check_variables"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"DISPLACEMENT_X"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"input_file_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"dynamic_test/dynamic_bossak_test_results.json"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"model_part_name"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"DISPLACEMENT_Displacement_Auto1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"time_frequency"</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="mf">0.01</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"print_output_process"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"python_module"</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="s2">"json_output_process"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"kratos_module"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"KratosMultiphysics"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"help"</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"process_name"</span><span class="w">          </span><span class="p">:</span><span class="w"> </span><span class="s2">"JsonOutputProcess"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Parameters"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"output_variables"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"DISPLACEMENT_X"</span><span class="p">,</span><span class="s2">"VELOCITY_X"</span><span class="p">,</span><span class="s2">"ACCELERATION_X"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"output_file_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"dynamic_test/dynamic_bossak_test_results.json"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"model_part_name"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"DISPLACEMENT_Displacement_Auto1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"time_frequency"</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="mf">0.01</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"check_json_results_process"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"python_module"</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="s2">"from_json_check_result_process"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"kratos_module"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"KratosMultiphysics"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"help"</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"process_name"</span><span class="w">          </span><span class="p">:</span><span class="w"> </span><span class="s2">"FromJsonCheckResultProcess"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Parameters"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"check_variables"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"DISPLACEMENT_X"</span><span class="p">,</span><span class="s2">"VELOCITY_X"</span><span class="p">,</span><span class="s2">"ACCELERATION_X"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"input_file_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"dynamic_test/dynamic_bossak_test_results.json"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"model_part_name"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"DISPLACEMENT_Displacement_Auto1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"time_frequency"</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="mf">0.01</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"check_analytic_results_process"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"python_module"</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="s2">"from_analytic_check_result_process"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"kratos_module"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"KratosMultiphysics"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"help"</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"process_name"</span><span class="w">          </span><span class="p">:</span><span class="w"> </span><span class="s2">"FromAnalyticCheckResultProcess"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Parameters"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"variable_name"</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class="s2">"DISPLACEMENT_X"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mesh_id"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"f(x,y,z,t)="</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="s2">"cos(10.0*t)"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"model_part_name"</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="s2">"DISPLACEMENT_Displacement_Auto1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"time_frequency"</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class="mf">0.01</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">    
    </span><span class="nl">"apply_custom_function_process"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"restart_options"</span><span class="w">          </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"SaveRestart"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"RestartFrequency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"LoadRestart"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Restart_Step"</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"constraints_data"</span><span class="w">         </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"incremental_load"</span><span class="w">         </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"incremental_displacement"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<p>In the previous example the tests can be checked both analitycally with <code class="language-plaintext highlighter-rouge">check_analytic_results_process</code> or numerically with <code class="language-plaintext highlighter-rouge">check_json_results_process</code> (for that check you need to generate first the <code class="language-plaintext highlighter-rouge">.json</code> results file with the <code class="language-plaintext highlighter-rouge">print_output_process</code>).</p>

<p>For some specific problems, where the common processes are not enough to define your test, you can define a local process, like the following one, where the displacement is imposed in the boundary and after solving the displacements they are checked in all the domain with ‘AssertAlmostEqual’:</p>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span><span class="p">,</span> <span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span> <span class="c1">#makes KratosMultiphysics backward compatible with python 2.6 and 2.7
</span>   <span class="c1"># Importing the Kratos Library
</span>   <span class="kn">from</span> <span class="nn">KratosMultiphysics</span> <span class="kn">import</span> <span class="o">*</span>
   <span class="kn">from</span> <span class="nn">KratosMultiphysics.SolidMechanicsApplication</span> <span class="kn">import</span> <span class="o">*</span>
   <span class="kn">from</span> <span class="nn">KratosMultiphysics.StructuralMechanicsApplication</span> <span class="kn">import</span> <span class="o">*</span>
   
   <span class="n">CheckForPreviousImport</span><span class="p">()</span>
   
   <span class="c1"># Import KratosUnittest
</span>   <span class="kn">import</span> <span class="nn">KratosMultiphysics.KratosUnittest</span> <span class="k">as</span> <span class="n">KratosUnittest</span>
   
   <span class="k">def</span> <span class="nf">Factory</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="n">Model</span><span class="p">):</span>
       <span class="k">if</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span> <span class="o">!=</span> <span class="n">Parameters</span><span class="p">):</span>
           <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="s">"Expected input shall be a Parameters object, encapsulating a json string"</span><span class="p">)</span>
       <span class="k">return</span> <span class="n">ApplyLocalProcess</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="n">settings</span><span class="p">[</span><span class="s">"Parameters"</span><span class="p">])</span>
   
   <span class="k">class</span> <span class="nc">ApplyLocalProcess</span><span class="p">(</span><span class="n">Process</span><span class="p">,</span> <span class="n">KratosUnittest</span><span class="p">.</span><span class="n">TestCase</span><span class="p">):</span>
   
       <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">model_part</span><span class="p">,</span><span class="n">params</span><span class="p">):</span>
   
           <span class="bp">self</span><span class="p">.</span><span class="n">model_part</span> <span class="o">=</span> <span class="n">model_part</span><span class="p">[</span><span class="n">params</span><span class="p">[</span><span class="s">"model_part_name"</span><span class="p">].</span><span class="n">GetString</span><span class="p">()]</span>
           <span class="bp">self</span><span class="p">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">params</span>
           
       <span class="k">def</span> <span class="nf">ExecuteInitialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
           <span class="c1"># Find neighbours if required
</span>           <span class="n">sprism_neighbour_search</span> <span class="o">=</span> <span class="n">SprismNeighbours</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">model_part</span><span class="p">)</span>
           <span class="n">sprism_neighbour_search</span><span class="p">.</span><span class="n">Execute</span><span class="p">()</span>
           <span class="c1">#pass
</span>           
       <span class="k">def</span> <span class="nf">ExecuteBeforeSolutionLoop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
           <span class="c1"># Add BC
</span>           <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">model_part</span><span class="p">.</span><span class="n">Nodes</span><span class="p">:</span>
               <span class="k">if</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">X</span> <span class="o">&gt;</span><span class="mf">2.40000e-01</span> <span class="o">-</span><span class="mf">1.0e-5</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Y</span> <span class="o">&gt;</span> <span class="mf">1.20000e-01</span> <span class="o">-</span><span class="mf">1.0e-5</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">X</span> <span class="o">&lt;</span> <span class="mf">1.0e-5</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Y</span> <span class="o">&lt;</span> <span class="mf">1.0e-5</span><span class="p">):</span>
                   <span class="n">node</span><span class="p">.</span><span class="n">Fix</span><span class="p">(</span><span class="n">DISPLACEMENT_X</span><span class="p">)</span>
                   <span class="n">node</span><span class="p">.</span><span class="n">SetSolutionStepValue</span><span class="p">(</span><span class="n">DISPLACEMENT_X</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0e-7</span> <span class="o">*</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Z</span> <span class="o">-</span> <span class="mf">0.0005</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">X</span> <span class="o">+</span> <span class="n">node</span><span class="p">.</span><span class="n">Y</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span>
                   <span class="n">node</span><span class="p">.</span><span class="n">Fix</span><span class="p">(</span><span class="n">DISPLACEMENT_Y</span><span class="p">)</span>
                   <span class="n">node</span><span class="p">.</span><span class="n">SetSolutionStepValue</span><span class="p">(</span><span class="n">DISPLACEMENT_Y</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0e-7</span> <span class="o">*</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Z</span> <span class="o">-</span> <span class="mf">0.0005</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Y</span> <span class="o">+</span> <span class="n">node</span><span class="p">.</span><span class="n">X</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span>
                   <span class="n">node</span><span class="p">.</span><span class="n">Fix</span><span class="p">(</span><span class="n">DISPLACEMENT_Z</span><span class="p">)</span>
                   <span class="n">node</span><span class="p">.</span><span class="n">SetSolutionStepValue</span><span class="p">(</span><span class="n">DISPLACEMENT_Z</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="mf">1.0e-7</span> <span class="o">*</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">X</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">node</span><span class="p">.</span><span class="n">X</span> <span class="o">*</span> <span class="n">node</span><span class="p">.</span><span class="n">Y</span> <span class="o">+</span> <span class="n">node</span><span class="p">.</span><span class="n">Y</span> <span class="o">**</span> <span class="mi">2</span><span class="p">))</span>
   
       
       <span class="k">def</span> <span class="nf">ExecuteInitializeSolutionStep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
           <span class="k">pass</span>
   
       <span class="k">def</span> <span class="nf">ExecuteFinalizeSolutionStep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
           <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">.</span><span class="n">model_part</span><span class="p">.</span><span class="n">Nodes</span><span class="p">:</span>
               <span class="n">value</span> <span class="o">=</span> <span class="n">node</span><span class="p">.</span><span class="n">GetSolutionStepValue</span><span class="p">(</span><span class="n">DISPLACEMENT_X</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
               <span class="bp">self</span><span class="p">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0e-7</span> <span class="o">*</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Z</span> <span class="o">-</span> <span class="mf">0.0005</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">X</span> <span class="o">+</span> <span class="n">node</span><span class="p">.</span><span class="n">Y</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span>
               <span class="n">value</span> <span class="o">=</span> <span class="n">node</span><span class="p">.</span><span class="n">GetSolutionStepValue</span><span class="p">(</span><span class="n">DISPLACEMENT_Y</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
               <span class="bp">self</span><span class="p">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="o">-</span><span class="mf">1.0e-7</span> <span class="o">*</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Z</span> <span class="o">-</span> <span class="mf">0.0005</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Y</span> <span class="o">+</span> <span class="n">node</span><span class="p">.</span><span class="n">X</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span>
               <span class="n">value</span> <span class="o">=</span> <span class="n">node</span><span class="p">.</span><span class="n">GetSolutionStepValue</span><span class="p">(</span><span class="n">DISPLACEMENT_Z</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
               <span class="bp">self</span><span class="p">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="mf">1.0e-7</span> <span class="o">*</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">X</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">node</span><span class="p">.</span><span class="n">X</span> <span class="o">*</span> <span class="n">node</span><span class="p">.</span><span class="n">Y</span> <span class="o">+</span> <span class="n">node</span><span class="p">.</span><span class="n">Y</span> <span class="o">**</span><span class="mi">2</span> <span class="p">))</span>
               
       <span class="k">def</span> <span class="nf">ExecuteBeforeOutputStep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
           <span class="k">pass</span>
   
       <span class="k">def</span> <span class="nf">ExecuteAfterOutputStep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
           <span class="k">pass</span>
   
       <span class="k">def</span> <span class="nf">ExecuteFinalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
           <span class="k">pass</span>
</code></pre></div></div>

<p>This specifics results can be found in the StructuralMechanicsApplication tests folder.</p>

<p>Important additional comments:</p>

<ul>
  <li>The solver, constitutive laws, etc…, everything is created from the main file, that should be <strong>ALWAYS</strong> the same, and just change the processes, or even include your local processes, but never change the main.</li>
  <li>You can create a json with data from previous simulations for future benchmarking using the process json_output_process.py and check it with from_json_check_result_process.py.</li>
  <li>In order to be recognized automatically, all tests need to have the name “test_” at the beginning of the definition (<code class="language-plaintext highlighter-rouge">test_MembranePatch</code> and <code class="language-plaintext highlighter-rouge">test_BendingPatch</code> in this example).</li>
  <li>The <code class="language-plaintext highlighter-rouge">tearDown</code> doesn’t do anything, it just closes files, clears memory…
  <code class="language-plaintext highlighter-rouge">imports</code> should be at the beginning of the file to avoid conflicts.</li>
  <li><strong>NO PRINTS</strong>: please don’t print anything on screen by calling the <code class="language-plaintext highlighter-rouge">print()</code> function. It is not necessary, the unittest already prints all the necessary information.</li>
</ul>

<h2 id="some-common-commands-in-unittest">Some common commands in Unittest</h2>

<p>The <a href="https://docs.python.org/2/library/unittest.html">link</a>  contents the commands that can be used with the original Unittest from Python, not all the commands from the python Unittest are available in Kratos right now, but they will be available in a near future. The following are the most common and essential commands in Kratos Unittest:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">assertTrue/assertFalse</code>:They check if the two inputs are true or false respectively.</li>
  <li><code class="language-plaintext highlighter-rouge">assertEqual</code>: Check if the two inputs are exactly equal, if the inputs are doubles it is recommended to use the next assert, in order to avoid precision errors.</li>
  <li><code class="language-plaintext highlighter-rouge">assertAlmostEqual</code>: Check if the solution is almost equal in the two inputs, with a certain precision (check the unittest python wiki for more details <a href="https://docs.python.org/2/library/unittest.html#unittest.TestCase.assertAlmostEqual">link</a>)</li>
</ul>

<h2 id="skipping-tests-with-external-dependencies">Skipping tests with external dependencies</h2>

<p>In general, tests for classes and functions defined in the Kratos Core should only use core objects and tests for classes and functions defined in an application should only use objects from the core or that application. However, in some cases it might be necessary to import something (an element, an utility,…) that belongs to a different application. When that happens, we have to account for the fact that our end user might not be compiling that extra application, causing the test to fail.</p>

<p>One way to solve this problem is to skip tests that require different applications if that application could not be found at runtime. This section shows how to do so. For the following example, assume that we are defining a new test for the FSI Application, which will test a new tool to do a coupled FSI simulation using features from the Structural Mechanics Application and the Fluid Dynamics Application.</p>

<p>When we define our test case, we use a <code class="language-plaintext highlighter-rouge">KratosMultiphysics.kratos_utilities.CheckIfApplicationsAvailable</code> to import other applications. Note that this is only necessary if functionalities from the other applications are directly used. If they are implicitly used (i.e. though json-input) then it is not necessary to import the other applications.</p>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">KratosMultiphysics</span>
<span class="kn">from</span> <span class="nn">KratosMultiphysics</span> <span class="kn">import</span> <span class="n">kratos_utilities</span>

<span class="k">if</span> <span class="n">kratos_utilities</span><span class="p">.</span><span class="n">CheckIfApplicationsAvailable</span><span class="p">(</span><span class="s">"StructuralMechanicsApplication"</span><span class="p">,</span> <span class="s">"FluidDynamicsApplication"</span><span class="p">)</span>
    <span class="kn">from</span> <span class="nn">KratosMultiphysics</span> <span class="kn">import</span> <span class="n">FluidDynamicsApplication</span>
    <span class="kn">from</span> <span class="nn">KratosMultiphysics</span> <span class="kn">import</span> <span class="n">StructuralMechanicsApplication</span>
<span class="kn">from</span> <span class="nn">KratosMultiphysics</span> <span class="kn">import</span> <span class="n">FSIApplication</span>
</code></pre></div></div>

<p>This will allow the script to run even if the applications are not available. Note that code execution will still fail if we try to use anything from a missing application.</p>

<p>Next, when we define a test that needs something from the external applications, we specify that it should be skipped if either the Structural Mechanics Application or the Fluid Dynamics Application are not available. This can be done using the <code class="language-plaintext highlighter-rouge">skipIfApplicationsNotAvailable</code> decorator:</p>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">KratosUnittest</span><span class="p">.</span><span class="n">skipIfApplicationsNotAvailable</span><span class="p">(</span><span class="s">"StructuralMechanicsApplication"</span><span class="p">,</span> <span class="s">"FluidDynamicsApplication"</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">FSIProblemEmulatorTest</span><span class="p">(</span><span class="n">FSIProblemEmulatorTestFactory</span><span class="p">):</span>
    <span class="c1"># Define the test as normal
</span></code></pre></div></div>

<p>The same can be done with using <code class="language-plaintext highlighter-rouge">KratosUnittest.skipTestIfApplicationsNotAvailable</code>:</p>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">FSIProblemEmulatorTest</span><span class="p">(</span><span class="n">FSIProblemEmulatorTestFactory</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_FSI_problem</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">skipTestIfApplicationsNotAvailable</span><span class="p">(</span><span class="s">"StructuralMechanicsApplication"</span><span class="p">,</span> <span class="s">"FluidDynamicsApplication"</span><span class="p">)</span>
        <span class="c1"># Define the test as normal
</span></code></pre></div></div>

<p>Now, if we try to run the tests but we have not compiled one of the extra applications, the test will be skipped. If we set the verbosity level to <code class="language-plaintext highlighter-rouge">2</code>, the test script will tell us why it was skipped.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python run_tests.py -v 2 -a 'FSIApplication'
...
test_execution (SmallTests.FSIProblemEmulatorTest) ... skipped 'Required Applications are missing: "StructuralMechanicsApplication", "FluidDynamicsApplication"'
</code></pre></div></div>

<p>Note that, if the test uses auxiliary python script files, the <code class="language-plaintext highlighter-rouge">import</code> statement for the extra applications should be placed in a <code class="language-plaintext highlighter-rouge">try</code>/<code class="language-plaintext highlighter-rouge">except</code> block in these files too, otherwise it will produce a runtime error.</p>

<h1 id="c">C++</h1>

<h2 id="how-to-run-tests-1">How to run tests</h2>

<p>First remember to add the following to your <code class="language-plaintext highlighter-rouge">configure.sh</code>:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">-DKRATOS_BUILD_TESTING</span><span class="o">=</span>ON                                                                                   <span class="se">\</span>
</code></pre></div></div>

<p>For the tests defined in C++ it is necessary to call the <code class="language-plaintext highlighter-rouge">Tester</code> from <code class="language-plaintext highlighter-rouge">KratosMultiPhysics</code>. Usage is the following:</p>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">KratosMultiphysics</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># If you want to run tests defined in an application, import it here.
</span>
<span class="n">Tester</span><span class="p">.</span><span class="n">SetVerbosity</span><span class="p">(</span><span class="n">Tester</span><span class="p">.</span><span class="n">Verbosity</span><span class="p">.</span><span class="n">TESTS_OUTPUTS</span><span class="p">)</span> <span class="c1"># Set the verbosity level
</span>
<span class="n">Tester</span><span class="p">.</span><span class="n">RunAllTestCases</span><span class="p">()</span> <span class="c1">#Test all cases
</span>
<span class="n">Tester</span><span class="p">.</span><span class="n">RunTestSuite</span><span class="p">(</span><span class="s">"Suite_name_here"</span><span class="p">)</span> <span class="c1">#Test a whole suite
</span>
<span class="n">Tester</span><span class="p">.</span><span class="n">RunTestCases</span><span class="p">(</span><span class="s">"Test_name_here"</span><span class="p">)</span> <span class="c1">#Test a specific case
</span></code></pre></div></div>

<p>But can consult the functioning of the C++ cases looking at the <a href="https://github.com/KratosMultiphysics/Kratos/blob/master/kratos/python/add_testing_to_python.cpp">code</a>. In general the main arguments are:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">SetVerbosity()</code> : To set the verbosity level. You can choose between:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">QUITE</code>: No message will be shown</li>
      <li><code class="language-plaintext highlighter-rouge">PROGRESS</code>: Only the progress of the tests run is shown</li>
      <li><code class="language-plaintext highlighter-rouge">TESTS_LIST</code>: Shows the list of tests</li>
      <li><code class="language-plaintext highlighter-rouge">FAILED_TESTS_OUTPUTS</code>: It returns the tests outputs (only in the failing ones)</li>
      <li><code class="language-plaintext highlighter-rouge">TESTS_OUTPUTS</code>: It returns all the tests outputs</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">ProfileAllTestCases()</code>:</li>
  <li><code class="language-plaintext highlighter-rouge">ProfileTestSuite()</code>:</li>
  <li><code class="language-plaintext highlighter-rouge">ProfileAllTestCases()</code>:</li>
  <li><code class="language-plaintext highlighter-rouge">NumberOfFailedTestCases()</code>: it returns the number of testcases failed.</li>
  <li><code class="language-plaintext highlighter-rouge">ResetAllTestCasesResults()</code>:</li>
  <li><code class="language-plaintext highlighter-rouge">ListOfAllTestCases()</code>: It lists all the avalaible test cases</li>
</ul>

<h3 id="mpi">MPI</h3>

<p>Please notice that when executing the tests with MPI, all following severity levels: <code class="language-plaintext highlighter-rouge">QUITE</code>, <code class="language-plaintext highlighter-rouge">PROGRESS</code>, <code class="language-plaintext highlighter-rouge">TESTS_LIST</code>, <code class="language-plaintext highlighter-rouge">FAILED_TESTS_OUTPUTS</code>, will omit the output from all processes except the master, and only <code class="language-plaintext highlighter-rouge">TESTS_OUTPUTS</code> will provide you with the output of all processes.</p>

<p>In order to ease the lecture of the outputs which will be mixed up in the terminal, we recommend running the tests with:</p>

<p><code class="language-plaintext highlighter-rouge">mpirun -np [N] -output-filename [filename_folder]</code></p>

<p>So a separate <code class="language-plaintext highlighter-rouge">stdout</code> and <code class="language-plaintext highlighter-rouge">stderr</code> are created for every rank of the execution in the <code class="language-plaintext highlighter-rouge">filename_folder</code> specified.</p>

<h2 id="general-structure-1">General structure</h2>

<p>In order to add a test to some of these suites, one can do it as shown in this example:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// System includes</span>

<span class="c1">// External includes</span>

<span class="c1">// Project includes</span>
<span class="cp">#include</span> <span class="cpf">"testing/testing.h"</span><span class="cp">
</span>
<span class="n">namespace</span> <span class="n">Kratos</span> <span class="p">{</span>
<span class="n">namespace</span> <span class="n">Testing</span> <span class="p">{</span>

	<span class="n">KRATOS_TEST_CASE_IN_SUITE</span><span class="p">(</span><span class="n">TestSuite</span><span class="p">,</span> <span class="n">KratosCoreFastSuite</span><span class="p">)</span>
	<span class="p">{</span>
	  <span class="n">Tester</span><span class="o">::</span><span class="n">CreateTestSuite</span><span class="p">(</span><span class="s">"MyTestSuite"</span><span class="p">)</span>
	  <span class="p">{</span>
	  <span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
<span class="p">}</span> <span class="c1">// namespace Kratos.</span>
</code></pre></div></div>

<p>This was the simplest example, tests with more complexity can be created, as the following one:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// System includes</span>
<span class="cp">#include</span> <span class="cpf">&lt;limits&gt;</span><span class="cp">
</span>
<span class="c1">// External includes</span>


<span class="c1">// Project includes</span>
<span class="cp">#include</span> <span class="cpf">"testing/testing.h"</span><span class="cp">
</span>
<span class="c1">// Utility includes</span>
<span class="cp">#include</span> <span class="cpf">"utilities/math_utils.h"</span><span class="cp">
</span>
<span class="n">namespace</span> <span class="n">Kratos</span> 
<span class="p">{</span>
    <span class="n">namespace</span> <span class="n">Testing</span> 
    <span class="p">{</span>
        <span class="n">constexpr</span> <span class="kt">double</span> <span class="n">EPSILON</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">numeric_limits</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;::</span><span class="n">epsilon</span><span class="p">();</span>
        <span class="n">constexpr</span> <span class="kt">double</span> <span class="n">TOLERANCE</span> <span class="o">=</span> <span class="mf">1e-6</span><span class="p">;</span>
        
        <span class="c1">/// Tests</span>
      
        <span class="cm">/** Checks if the area of the triangle is calculated correctly using Heron equation.
         * Checks if the area of the triangle is calculated correctly using Heron equation.
         */</span>
        
        <span class="n">KRATOS_TEST_CASE_IN_SUITE</span><span class="p">(</span><span class="n">MathUtilsHeronTest</span><span class="p">,</span> <span class="n">KratosCoreMathUtilsFastSuite</span><span class="p">)</span> 
        <span class="p">{</span>
            <span class="k">const</span> <span class="kt">double</span> <span class="n">area</span> <span class="o">=</span> <span class="n">MathUtils</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;::</span><span class="n">Heron</span><span class="o">&lt;</span><span class="nb">false</span><span class="o">&gt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">.</span><span class="mi">0</span><span class="p">),</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>

            <span class="n">KRATOS_CHECK_NEAR</span><span class="p">(</span><span class="n">area</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="n">TOLERANCE</span><span class="p">);</span>
        <span class="p">}</span>
        
        <span class="cm">/** Checks if it gives you the absolute value of a given value
         * Checks if It gives you the absolute value of a given value
         */</span>
        
        <span class="n">KRATOS_TEST_CASE_IN_SUITE</span><span class="p">(</span><span class="n">MathUtilsAbsTest</span><span class="p">,</span> <span class="n">KratosCoreMathUtilsFastSuite</span><span class="p">)</span> 
        <span class="p">{</span>
            <span class="k">const</span> <span class="kt">double</span> <span class="n">absolute</span> <span class="o">=</span> <span class="n">MathUtils</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;::</span><span class="n">Abs</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>

            <span class="n">KRATOS_CHECK_EQUAL</span><span class="p">(</span><span class="n">absolute</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>
        
        <span class="cm">/** Checks if it gives you the minimum value of a given value
         * Checks if It gives you the minimum value of a given value
         */</span>
        
        <span class="n">KRATOS_TEST_CASE_IN_SUITE</span><span class="p">(</span><span class="n">MathUtilsMinTest</span><span class="p">,</span> <span class="n">KratosCoreMathUtilsFastSuite</span><span class="p">)</span> 
        <span class="p">{</span>
            <span class="k">const</span> <span class="kt">double</span> <span class="n">min</span> <span class="o">=</span> <span class="n">MathUtils</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;::</span><span class="n">Min</span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>

            <span class="n">KRATOS_CHECK_EQUAL</span><span class="p">(</span><span class="n">min</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="c1">// namespace Testing</span>
<span class="p">}</span>  <span class="c1">// namespace Kratos.</span>
</code></pre></div></div>

<p>Remember to add the following to the CmakeLists.txt of</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span><span class="o">(</span><span class="k">${</span><span class="nv">KRATOS_BUILD_TESTING</span><span class="k">}</span> MATCHES ON<span class="o">)</span>
	file<span class="o">(</span>GLOB_RECURSE KRATOS_NAME_YOUR_APPLICATION_TESTING_SOURCES <span class="k">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="k">}</span>/tests/<span class="k">*</span>.cpp<span class="o">)</span>
endif<span class="o">(</span><span class="k">${</span><span class="nv">KRATOS_BUILD_TESTING</span><span class="k">}</span> MATCHES ON<span class="o">)</span>
</code></pre></div></div>

<p>You need to add your <code class="language-plaintext highlighter-rouge">KRATOS_NAME_YOUR_APPLICATION_TESTING_SOURCES</code> to your library, for example:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>add_library<span class="o">(</span>KratosYourApplicationApplication SHARED <span class="k">${</span><span class="nv">KRATOS_NAME_YOUR_APPLICATION_SOURCES</span><span class="k">}</span> <span class="k">${</span><span class="nv">KRATOS_NAME_YOUR_APPLICATION_TESTING_SOURCES</span><span class="k">}</span><span class="o">)</span>
</code></pre></div></div>

<p>It is recommended to put the tests files in a folder called <code class="language-plaintext highlighter-rouge">cpp_tests</code> inside the tests folder in order to follow the same structure as the <strong>Core</strong> and the <strong>CoreApplications</strong>.</p>

<blockquote>
  <p><strong>Please Note</strong></p>

  <p>To run tests (or suites) defined by an application, you need to import that application in the python script used to launch the tests.</p>
</blockquote>

<h2 id="some-common-commands">Some common commands</h2>

<p>The following are the most common and essential commands in Kratos Unittest:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">KRATOS_CHECK</code>/<code class="language-plaintext highlighter-rouge">KRATOS_CHECK_IS_FALSE</code>:They check if the input is true or false</li>
  <li><code class="language-plaintext highlighter-rouge">KRATOS_CHECK_EXCEPTION_RAISED</code>: Check if an exception is raised</li>
  <li><code class="language-plaintext highlighter-rouge">KRATOS_CHECK_C_STRING_EQUAL</code>/<code class="language-plaintext highlighter-rouge">KRATOS_CHECK_C_STRING__NOT_EQUAL</code>/<code class="language-plaintext highlighter-rouge">KRATOS_CHECK_STRING_CONTAIN_SUB_STRING</code>: Check if the string is the same, or not, or a substring</li>
  <li><code class="language-plaintext highlighter-rouge">KRATOS_CHECK_EQUAL</code>: Check if the two inputs are exactly equal, if the inputs are doubles it is recommended to use the next assert, in order to avoid precision errors.</li>
  <li><code class="language-plaintext highlighter-rouge">KRATOS_CHECK_NEAR</code>: Check if the solution is almost equal in the two inputs, with a certain precision</li>
  <li><code class="language-plaintext highlighter-rouge">KRATOS_CHECK_LESS</code>/<code class="language-plaintext highlighter-rouge">KRATOS_CHECK_GREATER</code>/<code class="language-plaintext highlighter-rouge">KRATOS_CHECK_LESS_EQUAL</code>/<code class="language-plaintext highlighter-rouge">KRATOS_CHECK_GREATER_EQUAL</code>:  It checks if the value is &lt;, &lt;=, &gt; or &gt;= than the other</li>
</ul>


    <!-- <div class="tags">
        
        <b>Tags: </b>
        
        
        
        
        
    </div> -->

</div>



<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2022 CIMNE. All rights reserved. <br />
 Site last generated: Dec 30, 2022 <br />
<p style="padding-right:32px;"><br><img src="/images/company_logo.png" alt="Company logo" height="100px"/></p>
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

</html>
