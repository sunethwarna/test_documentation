<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content="Linux-Build.md,  ">

<title>Linux Build | Kratos Multiphysics Documentation</title>

<link rel="stylesheet" href="/css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/modern-business.css">

<!-- Latest compiled and minified CSS -->
<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"> -->
<link rel="stylesheet" href="/css/bootstrap.min.css">
<link rel="stylesheet" href="/css/customstyles.css">
<link rel="stylesheet" href="/css/boxshadowproperties.css">

<!-- Most color styles are extracted out to here -->
<link rel="stylesheet" href="/css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

<script src="/js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
<!-- MathJax.js -->
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<script src="/js/toc.js"></script>
<script src="/js/customscripts.js"></script>

<link rel="shortcut icon" href="/images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4000/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="/">&nbsp;<span class="projectTitle"> Kratos Multiphysics Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="https://github.com/KratosMultiphysics/Kratos" target="_blank" rel="noopener">GitHub</a></li>
                
                
                
                <li><a href="news">News</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Kratos<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="/pages/Kratos/For_Users/General/Overview.html">For Users</a></li>
                        
                        
                        
                        <li><a href="/pages/Kratos/For_Developers/General/Application-Cases.html">For Developers</a></li>
                        
                        
                        
                        <li><a href="/pages/Kratos/Processes/General/Overview.html">Processes</a></li>
                        
                        
                        
                        <li><a href="/pages/Kratos/Utilities/General/Overview.html">Utilities</a></li>
                        
                        
                        
                        <li><a href="/pages/Kratos/Debugging/General/Checking-memory-usage-with-Valgrind.html">Debugging</a></li>
                        
                        
                        
                        <li><a href="/pages/Kratos/Documentation_Guide/General/Overview.html">Documentation Guide</a></li>
                        
                        
                        
                        <li><a href="/pages/Kratos/Workshops/2019/running_an_example_from_GiD.html">Workshops</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Applications<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="/pages/Applications/Discrete_Element_Modelling_Application/General/Basic-DEM-Benchmarking.html">Discrete Element Modelling Application</a></li>
                        
                        
                        
                        <li><a href="/pages/Applications/Fluid-Structure_Interaction_Application/General/2D-Mok-benchmark.html">Fluid-Structure Interaction Application</a></li>
                        
                        
                        
                        <li><a href="/pages/Applications/Fluid_Dynamics_Application/General/2D-Cavity-flow-problem.html">Fluid Dynamics Application</a></li>
                        
                        
                        
                        <li><a href="/pages/Applications/Mapping_Application/General/How-to-do-Mapping-between-nonmatching-meshes.html">Mapping Application</a></li>
                        
                        
                        
                        <li><a href="/pages/Applications/Meshing_Application/General/Utilities-MMG-Process.html">Meshing Application</a></li>
                        
                        
                        
                        <li><a href="/pages/Applications/Particle_Mechanics_Application/General/Overview.html">Particle Mechanics Application</a></li>
                        
                        
                        
                        <li><a href="/pages/Applications/Reduced_Order_Modelling_Application/General/API-for-RomApplication-(draft-to-be-moved-elsewhere).html">Reduced Order Modelling Application</a></li>
                        
                        
                        
                        <li><a href="/pages/Applications/Statistics_Application/General/Overview.html">Statistics Application</a></li>
                        
                        
                        
                        <li><a href="/pages/Applications/Structural_Mechanics_Application/General/0_Roll-up-beam-cantilever.html">Structural Mechanics Application</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
                
                
			<li>



  <a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:kratosmultiphysics@gmail.com?subject=Kratos Multiphysics Documentation feedback&body=I have some feedback about the Linux Build page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a>

</li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="/js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: '/search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Linux Build">{title}</a></li>',
                    noResultsText: '',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle">For Users </li>
  
  
  
  <li>
      <a title="General" href="#">General</a>
      <ul>
          
          
          
          <li><a title="Summary" href="/pages/Kratos/For_Users/General/../../../index.html">Summary</a></li>
          
          
          
          
          
          
          <li><a title="Overview" href="/pages/Kratos/For_Users/General/Overview.html">Overview</a></li>
          
          
          
          
          
          
          <li><a title="Management Structure" href="/pages/Kratos/For_Users/General/Management_Structure.html">Management Structure</a></li>
          
          
          
          
          
          
          <li><a title="General Structure" href="/pages/Kratos/For_Users/General/General_Structure.html">General Structure</a></li>
          
          
          
          
          
          
          <li><a title="Copyright and Licence" href="/pages/Kratos/For_Users/General/Copyright_and_Licence.html">Copyright and Licence</a></li>
          
          
          
          
      </ul>
  </li>
  
  
  
  <li>
      <a title="How to get Kratos" href="#">How to get Kratos</a>
      <ul>
          
          
          
          <li><a title="" href=""></a></li>
          
          
          
          <li class="subfolders">
              <a title="Binaries" href="#">Binaries</a>
              <ul>
                  
                  
                  
                  <li><a title="Getting Kratos binaries (via GiD)" href="/pages/Kratos/For_Users/How_to_get_Kratos/Binaries/Getting-Kratos-binaries-with-gid.html">Getting Kratos binaries (via GiD)</a></li>
                  
                  
                  
                  
                  
                  <li><a title="Getting Kratos Binaries for Windows" href="/pages/Kratos/For_Users/How_to_get_Kratos/Binaries/Getting-Kratos-Binaries-for-Windows.html">Getting Kratos Binaries for Windows</a></li>
                  
                  
                  
                  
                  
                  <li><a title="Getting Kratos Binaries for Linux" href="/pages/Kratos/For_Users/How_to_get_Kratos/Binaries/Getting-Kratos-Binaries-for-Linux.html">Getting Kratos Binaries for Linux</a></li>
                  
                  
                  
              </ul>
          </li>
          
          
          
          <li class="subfolders">
              <a title="Compilation" href="#">Compilation</a>
              <ul>
                  
                  
                  
                  <li><a title="Compilation Options" href="/pages/Kratos/For_Users/How_to_get_Kratos/Compilation/remote_Compilation_Options.html">Compilation Options</a></li>
                  
                  
                  
                  
                  
                  <li><a title="How to Compile Kratos in Debug mode" href="/pages/Kratos/For_Users/How_to_get_Kratos/Compilation/How-to-Compile-Kratos-in-Debug-mode.html">How to Compile Kratos in Debug mode</a></li>
                  
                  
                  
                  
                  
                  <li class="active"><a title="Linux Build" href="/pages/Kratos/For_Users/How_to_get_Kratos/Compilation/Linux-Build.html">Linux Build</a></li>
                  
                  
                  
              </ul>
          </li>
          
          
          
          
      </ul>
  </li>
  
  
  
  <li>
      <a title="Getting started" href="#">Getting started</a>
      <ul>
          
          
          
          <li><a title="Kernel and Applications" href="/pages/Kratos/For_Users/Getting_started/Editing-kratos-kernel-and-application-approach.html">Kernel and Applications</a></li>
          
          
          
          
          
          
          <li><a title="Python Script  Getting Started" href="/pages/Kratos/For_Users/Getting_started/getting-started.html">Python Script  Getting Started</a></li>
          
          
          
          
          
          
          <li><a title="Python Script  Hello Kratos" href="/pages/Kratos/For_Users/Getting_started/hello-world.html">Python Script  Hello Kratos</a></li>
          
          
          
          
          
          
          <li><a title="Python Tutorials" href="/pages/Kratos/For_Users/Getting_started/tutorials.html">Python Tutorials</a></li>
          
          
          
          <li class="subfolders">
              <a title="Data Structure" href="#">Data Structure</a>
              <ul>
                  
                  
                  
                  <li><a title="Entities creation from scratch" href="/pages/Kratos/For_Users/Getting_started/Data_Structure/Entities-creation-from-scratch.html">Entities creation from scratch</a></li>
                  
                  
                  
                  
                  
                  <li><a title="Python Script  Generating New Modelparts" href="/pages/Kratos/For_Users/Getting_started/Data_Structure/generate-new-modelpart.html">Python Script  Generating New Modelparts</a></li>
                  
                  
                  
                  
                  
                  <li><a title="Python Script  ModelPart Elements and Conditions" href="/pages/Kratos/For_Users/Getting_started/Data_Structure/elems-and-conds.html">Python Script  ModelPart Elements and Conditions</a></li>
                  
                  
                  
                  
                  
                  <li><a title="Python Script  ModelPart and SubModelPart" href="/pages/Kratos/For_Users/Getting_started/Data_Structure/modelpart-and-submodelpart.html">Python Script  ModelPart and SubModelPart</a></li>
                  
                  
                  
                  
                  
                  <li><a title="Python Script  Nodes and Nodal Data" href="/pages/Kratos/For_Users/Getting_started/Data_Structure/nodes-and-data.html">Python Script  Nodes and Nodal Data</a></li>
                  
                  
                  
              </ul>
          </li>
          
          
          
          <li class="subfolders">
              <a title="From scratch" href="#">From scratch</a>
              <ul>
                  
                  
                  
                  <li><a title="Creating a base application" href="/pages/Kratos/For_Users/Getting_started/From_scratch/Creating-a-base-application.html">Creating a base application</a></li>
                  
                  
                  
                  
                  
                  <li><a title="Example A simple Fluid   Thermal coupled solver" href="/pages/Kratos/For_Users/Getting_started/From_scratch/Example-A-simple-Fluid---Thermal-coupled-solver.html">Example A simple Fluid   Thermal coupled solver</a></li>
                  
                  
                  
                  
                  
                  <li><a title="How to Create a New Application using cmake" href="/pages/Kratos/For_Users/Getting_started/From_scratch/How-to-Create-a-New-Application-using-cmake.html">How to Create a New Application using cmake</a></li>
                  
                  
                  
                  
                  
                  <li><a title="Implementing thermal solver" href="/pages/Kratos/For_Users/Getting_started/From_scratch/Implementing-thermal-solver.html">Implementing thermal solver</a></li>
                  
                  
                  
                  
                  
                  <li><a title="Kratos For Dummies Stationary heat transfer" href="/pages/Kratos/For_Users/Getting_started/From_scratch/Kratos-For-Dummies-Stationary-heat-transfer.html">Kratos For Dummies Stationary heat transfer</a></li>
                  
                  
                  
                  
                  
                  <li><a title="Kratos For Dummies Transient non linear heat transfer" href="/pages/Kratos/For_Users/Getting_started/From_scratch/Kratos-For-Dummies-Transient-non-linear-heat-transfer.html">Kratos For Dummies Transient non linear heat transfer</a></li>
                  
                  
                  
              </ul>
          </li>
          
          
          
          <li class="subfolders">
              <a title="Input Output and Visualization" href="#">Input Output and Visualization</a>
              <ul>
                  
                  
                  
                  <li><a title="How to interact with a simulation to visualize real time results" href="/pages/Kratos/For_Users/Getting_started/Input_Output_and_Visualization/How-to-interact-with-a-simulation-to-visualize-real-time-results.html">How to interact with a simulation to visualize real time results</a></li>
                  
                  
                  
                  
                  
                  <li><a title="How to write a JSON configuration file" href="/pages/Kratos/For_Users/Getting_started/Input_Output_and_Visualization/How-to-write-a-JSON-configuration-file.html">How to write a JSON configuration file</a></li>
                  
                  
                  
                  
                  
                  <li><a title="Input data" href="/pages/Kratos/For_Users/Getting_started/Input_Output_and_Visualization/Input-data.html">Input data</a></li>
                  
                  
                  
                  
                  
                  <li><a title="Python Script  Reading ModelPart From Input File" href="/pages/Kratos/For_Users/Getting_started/Input_Output_and_Visualization/reading-input.html">Python Script  Reading ModelPart From Input File</a></li>
                  
                  
                  
                  
                  
                  <li><a title="Python Script  Reading ProjectParameters" href="/pages/Kratos/For_Users/Getting_started/Input_Output_and_Visualization/project-parameters.html">Python Script  Reading ProjectParameters</a></li>
                  
                  
                  
                  
                  
                  <li><a title="Python Script  Writing Output File" href="/pages/Kratos/For_Users/Getting_started/Input_Output_and_Visualization/writing-output.html">Python Script  Writing Output File</a></li>
                  
                  
                  
              </ul>
          </li>
          
          
          
          
      </ul>
  </li>
  
  
  
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">Linux Build</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    


    

    <a target="_blank" rel="noopener" href="https://github.com/KratosMultiphysics/Kratos/tree/master/docs/pages/Kratos/For_Users/How_to_get_Kratos/Compilation/Linux-Build.md" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>

    

   <h2 id="how-to-compile-kratos">How to compile Kratos:</h2>

<p>You can find latest Kratos compilation instructions in <a href="https://github.com/KratosMultiphysics/Kratos/blob/master/INSTALL.md">Install.md</a></p>

<h2 id="test-and-usage">Test and Usage</h2>

<ul>
  <li>Objectives:</li>
  <li>Tests kratos</li>
</ul>

<p>To to tests the compilation, you can execute a simple python script containing this line:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">KratosMultiphysics</span> <span class="kn">import</span> <span class="o">*</span>
</code></pre></div></div>

<p>We strongly recommend you to run kratos scripts with the “runkratos” binary that will be generated inside your Kratos installation folder. You can also run them by using python (if you have compiled with python version 2.x.x), or python3 (if you have compiled with python version 3.x.x)</p>

<ul>
  <li>runkratos test.py</li>
  <li>python test.py</li>
  <li>python3 test.py</li>
</ul>

<p>If everething was ok you will see this message:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     |  /           |
     ' /   __| _` | __|  _ \   __|
     . \  |   (   | |   (   |\__ \
    _|\_\_|  \__,_|\__|\___/ ____/
               Multi-Physics 3.3.11016
</code></pre></div></div>

<h2 id="common-problems">Common problems</h2>

<p>In this section we provide will try to provide solutions to the most common problems and issues that may appear during the compilation process</p>

<h3 id="cannot-find-kratosmultiphysics">Cannot find KratosMultiphysics</h3>

<p>Make sure that <code class="language-plaintext highlighter-rouge">LD_LIBRARY_PATH</code> and <code class="language-plaintext highlighter-rouge">PYTHONPATH</code> are pointing to your kratos folder.
To make sure that the variables are set correctly, you can always print their value from the terminal by typing:</p>
<pre><code class="language-Shell">echo $LD_LIBRARY_PATH
</code></pre>
<pre><code class="language-Shell">echo $PYTHONPATH
</code></pre>
<pre><code class="language-Shell">echo $PATH
</code></pre>

<p>Some shell interpreters have issues with the separator token. If environment variables above listed are correctly set, try to remove the “:” if kratos is the only path there.</p>

<pre><code class="language-Shell"># This may cause problem
echo $PYTHONPATH
:path/to/kratos

# Should be
export PYTHONPATH=path/to/kratos
echo $PYTHONPATH
path/to/kratos
</code></pre>

<h3 id="i-am-getting-python-link-errors">I am getting Python link errors</h3>

<p>This errors appear if the version of python used to compile boost is not the same as the one
used by Kratos.</p>

<p>There are several causes that may be causing this. Pleas try the following:</p>

<h4 id="python-version-mismatch">Python version mismatch</h4>
<p>The most provable reason for this error to happend is a missmatch between the python versions used by Kratos and Boost. Please, double check you have the same version of python in the projet-config.jam (boost) and configure.sh (Kratos) files.</p>

<h4 id="old-version-of-cmake">Old version of CMake</h4>
<p>Please check that CMake version is 3.14 or newer. In general newer versions of Python will need newer versions of CMake to work.</p>

<p>It has been observed that compiling with IDE’s ( QTCreator, Netbeans, …) sometimes causes this error as well.
If you are experiencing this problem, try to modify the configure.sh script and replace ‘'’cmake’’’ by the absolute path of CMake 3.14 or the any newer version:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/path/to/correct/cmake ..                                                     \
-DCMAKE_C_COMPILER=/usr/bin/gcc                                               \
...
</code></pre></div></div>

<p>If for some reason you have to use an older version of CMake you can manually add support for an outdated versiof of python by adding the version to these files:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/share/cmake-3.x/Modules/FindPythonLibs.cmake
/usr/share/cmake-3.x/Modules/FindPythonInterp.cmake
</code></pre></div></div>

<p>Please add the version at the begining of the list:</p>

<pre><code class="language-CMake">SET(_PYTHON1_VERSIONS 1.6 1.5)
SET(_PYTHON2_VERSIONS 2.7 2.6 2.5 2.4 2.3 2.2 2.1 2.0)
SET(_PYTHON3_VERSIONS 3.4 3.3 3.2 3.1 3.0)
</code></pre>

<h3 id="i-am-getting-lots-of-warnings-when-i-compile-kratos">I am getting lots of warnings when I compile Kratos</h3>

<p>It is known that in some cases warnings appear while including boost files due to the fact that the flag <strong>“-Wunused-local-typedefs”</strong> is set by default in gcc.</p>

<p>This does not have any impact on the final code, but if you want a cleaner output you can add the flag <strong>“-Wno-unused-local-typedefs”</strong> to the configuration files:</p>

<pre><code class="language-CMake">-DCMAKE_CXX_FLAGS="${CMAKE_CXX_FLAGS} -msse3 -Wno-unused-local-typedefs"      \
-DCMAKE_C_FLAGS="${CMAKE_C_FLAGS} -msse3 -Wno-unused-local-typedefs"          \
</code></pre>

<h2 id="compiling-with-mpi">Compiling with MPI</h2>
<p>If you want to compile the MPI-version of Kratos, you need to at least to</p>
<ul>
  <li>Have a MPI installation (e.g. <a href="http://www.open-mpi.de/">OpenMPI</a> or <a href="https://software.intel.com/en-us/intel-mpi-library">Intel MPI</a>). There are no known restrictions on which version to use.</li>
  <li>Set the flag <code class="language-plaintext highlighter-rouge">MPI_NEEDED</code> to <code class="language-plaintext highlighter-rouge">ON</code> in the configure-script</li>
</ul>

<p>This will compile the core of Kratos with MPI (i.e. compile the MPI-Core) and provide basic features of MPI. Check <a href="https://github.com/KratosMultiphysics/Kratos/blob/master/kratos/mpi/tests/test_mpi_data_communicator_python.py">here</a> to see which functionalities are exposed to Python.</p>

<p>If you want to run Kratos in MPI together with e.g. the <code class="language-plaintext highlighter-rouge">FluidDynamicsApplication</code> or the <code class="language-plaintext highlighter-rouge">StructuralMechanicsApplication</code>, then you also need <a href="https://trilinos.org/">Trilinos</a> for solving the distributed system of equations and <a href="http://glaros.dtc.umn.edu/gkhome/metis/metis/overview">Metis</a> for partitioning of the problem.
In order to use them it is required to compile the <code class="language-plaintext highlighter-rouge">TrilinosApplication</code> and the <code class="language-plaintext highlighter-rouge">MetisApplication</code> respectively. These applications require to install the corresponding libraries first.</p>

<h3 id="metisapplication">MetisApplication</h3>
<h4 id="installing-metis-using-the-package-manager">Installing METIS using the package-manager</h4>
<p>On Ubuntu 18.04, the following command installs the necessary files:</p>
<pre><code class="language-Shell">sudo apt-get install libmetis-dev
</code></pre>
<h4 id="compiling-metis-yourself">Compiling METIS yourself</h4>
<p>Compiling is straight-forward using the build-instructions that come with the download.</p>

<h4 id="compiling-the-metisapplication">Compiling the <code class="language-plaintext highlighter-rouge">MetisApplication</code></h4>
<p>Afterwards add the following lines to your configure-script:</p>
<pre><code class="language-Shell">-DMETIS_APPLICATION=ON \
-DUSE_METIS_5=ON \
</code></pre>

<h3 id="trilinosapplication">TrilinosApplication</h3>

<h4 id="installing-trilinos-using-the-package-manager">Installing Trilinos using the package-manager</h4>
<p>On Ubuntu 18.04, the following command installs the necessary files:</p>
<pre><code class="language-Shell">sudo apt-get install trilinos-all-dev
</code></pre>
<p>Add the following to your configure-script:</p>
<pre><code class="language-Shell">-DTRILINOS_INCLUDE_DIR="/usr/include/trilinos" \
-DTRILINOS_LIBRARY_DIR="/usr/lib/x86_64-linux-gnu" \
-DTRILINOS_LIBRARY_PREFIX="trilinos_" \
</code></pre>
<h4 id="compiling-trilinos-yourself">Compiling Trilinos yourself</h4>
<p>Some information on how to compile Trilinos (version 12.10.1) is provided in the following, but this might not be applicable for all systems. Please consult the build-instructions of Trilinos itself if needed or open an issue.</p>

<p>Add the following to your configure-script if you compile Trilinos yourself:</p>
<pre><code class="language-Shell">-DTRILINOS_ROOT="path/to/trilinos" \
</code></pre>

<p>Depending on the configuration it might also be necessary to specify <code class="language-plaintext highlighter-rouge">TRILINOS_SOURCE</code> for CMake to find the correct trilinos-libraries.
***</p>

<p>It is recommended to create a build directory in the root folder of Trilinos. Inside this folder, create a <code class="language-plaintext highlighter-rouge">do-configure.sh</code> to compile Trilinos.</p>

<p>If you use LAPACK 3.6 or newer, then you have to apply the following fixes: (sources: ​<a href="https://github.com/gahansen/Albany/wiki/ALCF-Vesta">1</a>, <a href="https://www.dealii.org/developer/external-libs/trilinos.html">​2</a>):</p>

<p>In <code class="language-plaintext highlighter-rouge">trilinos-12.10.1-Source/packages/epetra/src/Epetra_LAPACK_wrappers.h</code></p>

<p>Change</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#define DGGSVD_F77  F77_BLAS_MANGLE(dggsvd,DGGSVD)
#define SGGSVD_F77  F77_BLAS_MANGLE(sggsvd,SGGSVD)
</code></pre></div></div>
<p>to</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#define DGGSVD_F77  F77_BLAS_MANGLE(dggsvd3,DGGSVD3)
#define SGGSVD_F77  F77_BLAS_MANGLE(sggsvd3,SGGSVD3)
</code></pre></div></div>

<p>This is an example for a <code class="language-plaintext highlighter-rouge">do-configure.sh</code>. Of course, the paths have to be adjusted</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>TRILINOS_ROOT="${HOME}/software/kratos/trilinos"
EXTRA_LINK_FLAGS=""
EXTRA_ARGS=$@
MPI_ROOT="${HOME}/software/ompi"
METIS_ROOT="{HOME}/software/kratos/parmetis/ParMetis-3.2.0"
LAPACK_ROOT="${HOME}/software/kratos/lapack/lapack-3.7.0"

rm CMakeCache.txt
rm -rf CMakeFiles
rm *.cmake

cmake \
  -D CMAKE_INSTALL_PREFIX:FILEPATH="${TRILINOS_ROOT}" \
  -D CMAKE_BUILD_TYPE:STRING=RELEASE \
  -D Trilinos_SOURCE_DIR="${TRILINOS_SOURCE}" \
  -D CMAKE_CXX_COMPILER=mpicxx \
  -D CMAKE_C_COMPILER=mpicc \
  -D CMAKE_Fortran_COMPILER=mpif90 \
  -D TPL_ENABLE_MPI:BOOL=ON \
  -D Trilinos_ENABLE_CXX11=ON\
  -D MPI_BASE_DIR="${MPI_ROOT}" \
  -D MPI_INCLUDE_DIRS:PATH="${MPI_ROOT}/include" \
  -D BUILD_SHARED_LIBS:BOOL=ON \
  -D BLAS_LIBRARY_DIRS:FILEPATH="${LAPACK_ROOT}" \
  -D BLAS_LIBRARY_NAMES:STRING="librefblas.a" \
  -D LAPACK_LIBRARY_DIRS:FILEPATH="${LAPACK_ROOT}" \
  -D LAPACK_LIBRARY_NAMES:STRING="liblapack.a" \
  -D TPL_ENABLE_ParMETIS:BOOL=ON \
  -D ParMETIS_INCLUDE_DIRS:PATH="${METIS_ROOT}" \
  -D ParMETIS_LIBRARY_NAMES:STRING="parmetis" \
  -D ParMETIS_LIBRARY_DIRS:PATH="${METIS_ROOT}" \
  -D TPL_ENABLE_METIS:BOOL=ON \
  -D METIS_INCLUDE_DIRS:PATH="${METIS_ROOT}/METISLib" \
  -D METIS_LIBRARY_NAMES:STRING="metis" \
  -D METIS_LIBRARY_DIRS:PATH="${METIS_ROOT}" \
  -D Trilinos_EXTRA_LINK_FLAGS:STRING="$EXTRA_LINK_FLAGS" \
  -D Trilinos_ENABLE_Amesos:BOOL=ON \
  -D Amesos_ENABLE_SuperLUDist:BOOL=ON \
  -D Trilinos_ENABLE_Anasazi:BOOL=ON \
  -D Trilinos_ENABLE_AztecOO:BOOL=ON \
  -D AztecOO_ENABLE_Teuchos:BOOL=ON \
  -D Trilinos_ENABLE_Didasko:BOOL=ON \
  -D Trilinos_ENABLE_Epetra:BOOL=ON \
  -D Trilinos_ENABLE_EpetraExt:BOOL=ON \
  -D Trilinos_ENABLE_Galeri:BOOL=ON \
  -D Trilinos_ENABLE_Ifpack:BOOL=ON \
  -D Trilinos_ENABLE_ML:BOOL=ON \
  -D Trilinos_ENABLE_PyTrilinos:BOOL=OFF \
  -D Trilinos_ENABLE_Teuchos:BOOL=ON \
  -D Trilinos_ENABLE_Triutils:BOOL=ON \
  -D DART_TESTING_TIMEOUT:STRING=600 \
  -D CMAKE_Fortran_FLAGS:STRING="-O5 -funroll-all-loops -fPIC" \
  -D CMAKE_C_FLAGS:STRING="-O3 -fPIC -funroll-loops -march=native" \
  -D CMAKE_CXX_FLAGS:STRING="-O3 -fPIC -funroll-loops -ffast-math -march=native -DMPICH_IGNORE_CXX_SEEK" \
 $EXTRA_ARGS \
 ${TRILINOS_SOURCE}
</code></pre></div></div>
<p>Build Trilinos with:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sh do-configure.sh
make
make install
</code></pre></div></div>

<h4 id="compiling-the-trilinosapplication">Compiling the <code class="language-plaintext highlighter-rouge">TrilinosApplication</code></h4>
<p>Afterwards add the following lines to your configure-script:</p>
<pre><code class="language-Shell">-DTRILINOS_APPLICATION=ON \
</code></pre>

<h3 id="testing-mpi-compilation">Testing MPI compilation</h3>
<p>To to tests the compilation, you can execute a simple python script containing these lines:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from KratosMultiphysics import *
from KratosMultiphysics.mpi import *
from KratosMultiphysics.MetisApplication import *
from KratosMultiphysics.TrilinosApplication import *
</code></pre></div></div>

<h3 id="running-kratos-in-mpi">Running Kratos in MPI</h3>
<p>To execute Kratos in parallel, you can for example use the <code class="language-plaintext highlighter-rouge">mpiexec</code> command (running with 4 processes):</p>

<p><code class="language-plaintext highlighter-rouge">mpiexec -np 4 python3 MainKratos.py --using-mpi</code></p>

<!-- ALL THIS IS OUTDATED AND SHOULD NOT BE USED. COMMENTED BECAUSE MAY BE OF SOME USAGE AS FUTURE REFERENCE
In this section we are going to go through the process of compiling a basic version of Kratos Multiphysics under linux environments. Specifically, we explain how to compile in the current Ubuntu LTS (16.04 at this moment), with the latest checked libraries. A basic knowledge of Linux is assumed ( execute commands, create directories, etc...).

_Please notice that this guide is introductory and many of the steps and software used here can be customized. The only hard restriction is to use a C++11 compatible compiler._

## Git

* Objectives:
 * Install git
 * Get Kratos Multiphysics source code

The first thing you will need is the Kratos Multiphysics source code. To download the code you will have to use a git. You can install the default git by using this command:

```Shell
sudo apt-get install git
```

Once git is installed you can fetch the code by using these commands:

```Shell
git clone https://github.com/KratosMultiphysics/Kratos Kratos
```

## Dev Packages

* Objectives:
 * Get Python3-dev
 * Get G++
 * Get Fortran compiler
 * Get LIBBLAS and LIBLAPACK

You will need a series of packages with some kratos dependencies. The command below will install all the packages needed. It will allow you to compile with python2 or python3 so you will be able to chose later ( we recommend python3 )

```Shell
sudo apt-get install python-dev python3-dev gcc g++ gfortran libblas-dev liblapack-dev
```

## Boost
* Objectives:
 * Download Boost

The next step will consist in downloading Boost. Kratos Multiphysics needs Boost libraries to support some of its functions ans you can found them here: http://www.boost.org/users/download/.

We recommend you to use boost 1.67 or newer, earlier versions may cause compiling errors.

It's very important to add the correct path to the boost library in the configure.sh by setting the variable -DBOOST_ROOT. You will see an example in the configure section.

## CMake

* Objectives:
 * Install CMake

CMake is the tool used to compile kratos. To install it, the first option is to execute the following command. Please ensure that you '''use CMake 3.4 or higher''':

```
sudo apt-get install cmake
```

:warning: **If there is no other alternative but CMake 2.8 or earlier please refer to [old verions of CMake](Linux-install#old-version-of-cmake)**

## Configure

* Objectives:
 * Configure Kratos for the first time compilation

In order to compile kratos for the first time you will need to configure the project.  First, navigate to your kratos/cmake_build folder and make a copy of the template file:

```Shell
cp example_configure.sh.do_not_touch configure.sh
```

Then, open configure.sh with any text editor and modify the lines that tell cmake where some components are located.
You will need to provide at least '''BOOST_ROOT'' and '''PYTHON_EXECUTABLE'''.

Kratos has moved to C++11 recently, Please mind to add the "-std=c++11" to your compiler of choice. If you follow the example below, it is already present ( notice the flag in CMAKE_CXX_FLAGS, highlighted in bold)

For example, in ubuntu it will look something like:

```
cmake ..                                                                      \
-DCMAKE_C_COMPILER=/usr/bin/gcc                                               \
-DCMAKE_INSTALL_RPATH="/home/example/kratos/libs"                             \
-DCMAKE_INSTALL_RPATH_USE_LINK_PATH=TRUE                                      \
-DCMAKE_CXX_COMPILER=/usr/bin/g++                                             \
-DCMAKE_C_FLAGS="${CMAKE_C_FLAGS} -msse3"                                     \
-DCMAKE_CXX_FLAGS="${CMAKE_CXX_FLAGS} -msse3 -std=c++11"                      \
-DBOOST_ROOT="~/compiled_libraries/boost_1_67_0"                              \
-DPYTHON_EXECUTABLE="/usr/bin/python3"                                        \
-DMESHING_APPLICATION=ON                                                      \
-DEXTERNAL_SOLVERS_APPLICATION=ON                                             \

// More options ( do not include this line )
```

Note that the ```\``` must be the last character in the line. Even an space after it will cause an error! (and the returned message is completely misleading, so be careful with this!!)

Notice that you can also turn ON/OFF parts of the code according to your necessities:

```CMake
-DSTRUCTURAL_MECHANICS_APPLICATION=ON/OFF
```

:warning: Cmake requires all definitions in a single line! The line concatenation character ```\``` therefore MUST NOT be followed by any whitespace in the same line as this would prevent the cmake from running the lines below

## Compile

* Objectives:
 * Compile kratos.

If you followed all the steps correctly, compiling kratos should be as easy as executing the configure script:

```Shell
sh configure.sh
```

Please, notice that kratos is big and the compilation process can easily take 1 or 2 hours, depending on which applications are being compiled. A typical compilation process with the default configuration takes approximately 45 minutes with a i7 / 8GB Ram computer.

## Setting up your enviroment

* Objectives:
 * Tell Linux how to execute kratos

Once Kratos is compiled, you will have to tell the OS where to find the libraries. You can do that
by executing these commands. Notice that '''you have to put the same path as in the section "Configure"'''

```Shell
echo "export PYTHONPATH=$PYTHONPATH:/path/to/my/kratos/installation" >> $HOME/.bashrc
echo "export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path/to/my/kratos/installation/libs" >> $HOME/.bashrc
```

If you have enabled the embedded python option -DINSTALL_EMBEDDED_PYTHON=ON, you can also add

```Shell
echo "export PATH=$PATH:/path/to/my/kratos/installation" >> $HOME/.bashrc
```

In order to have the "runkratos" available as a regular command.

Now each time you open a terminal these commands will be executed and the paths set automatically.
If you don't want to reset your terminal the first time, just execute:

```Shell
source ~/.bashrc
```

## Test

* Objectives:
 * Tests kratos

To to tests the compilation, you can execute a simple python script containing this line:

```python
from KratosMultiphysics import *
```

We strongly recommend you to run kratos scripts with the "runkratos" binary that will be generated inside your Kratos installation folder. You can also run them by using python (if you have compiled with python version 2.x.x), or python3 (if you have compiled with python version 3.x.x)

* runkratos test.py
* python test.py
* python3 test.py

If everething was ok you will see this message:

```
     |  /           |
     ' /   __| _` | __|  _ \   __|
     . \  |   (   | |   (   |\__ \
    _|\_\_|  \__,_|\__|\___/ ____/
               Multi-Physics 3.3.11016
```

# Troubleshooting

In this section we provide will try to provide solutions to the most common problems and issues that may appear during the compilation process

## Cannot find KratosMultiphysics

Make sure that ```LD_LIBRARY_PATH``` and ```PYTHONPATH``` are pointing to your kratos folder.
To make sure that the variables are set correctly, you can always print their value from the terminal by typing:
```Shell
echo $LD_LIBRARY_PATH
```
```Shell
echo $PYTHONPATH
```
```Shell
echo $PATH
```

Some shell interpreters have issues with the separator token. If environment variables above listed are correctly set, try to remove the ":" if kratos is the only path there.

```Shell
# This may cause problem
echo $PYTHONPATH
:path/to/kratos

# Should be
export PYTHONPATH=path/to/kratos
echo $PYTHONPATH
path/to/kratos
```

## I am getting Python link errors

This errors appear if the version of python used to compile boost is not the same as the one
used by Kratos.

There are several causes that may be causing this. Pleas try the following:

### Python version mismatch
The most provable reason for this error to happend is a missmatch between the python versions used by Kratos and Boost. Please, double check you have the same version of python in the projet-config.jam (boost) and configure.sh (Kratos) files.

### Old version of CMake
If the error remains, please check that CMake version is 3.0.2 or newer. If it is not, it will be unable to load python 3.4.
To solve the error please **upgrade to CMake 3.0.2**.

It has been observed that compiling with IDE's ( QTCreator, Netbeans, ...) sometimes causes this error as well.
If you are experiencing this problem, try to modify the configure.sh script and replace '''cmake''' by the absolute path of CMake 3.0.2:

```
/path/to/correct/cmake ..                                                     \
-DCMAKE_C_COMPILER=/usr/bin/gcc                                               \
...
```

If for some reason you have to use an older version of CMake you can manually add support for python 3.4 by adding the version to these files:

```
/usr/share/cmake-2.8/Modules/FindPythonLibs.cmake (line 41)
/usr/share/cmake-2.8/Modules/FindPythonInterp.cmake (line 36)
```

Please add the version at the begining of the list:

```CMake
SET(_PYTHON1_VERSIONS 1.6 1.5)
SET(_PYTHON2_VERSIONS 2.7 2.6 2.5 2.4 2.3 2.2 2.1 2.0)
SET(_PYTHON3_VERSIONS 3.4 3.3 3.2 3.1 3.0)
```

## I am getting lots of warnings when I compile Kratos

It is known that in some cases warnings appear while including boost files due to the fact that the flag **"-Wunused-local-typedefs"** is set by default in gcc.

This does not have any impact on the final code, but if you want a cleaner output you can add the flag **"-Wno-unused-local-typedefs"** to the configuration files:

```CMake
-DCMAKE_CXX_FLAGS="${CMAKE_CXX_FLAGS} -msse3 -Wno-unused-local-typedefs"      \
-DCMAKE_C_FLAGS="${CMAKE_C_FLAGS} -msse3 -Wno-unused-local-typedefs"          \
```

# Compiling with MPI
If you want to compile the MPI-version of Kratos, you need to at least to
* Have a MPI installation (e.g. [OpenMPI](http://www.open-mpi.de/) or [Intel MPI](https://software.intel.com/en-us/intel-mpi-library)). There are no known restrictions on which version to use.
* Set the flag `MPI_NEEDED` to `ON` in the configure-script

This will compile the core of Kratos with MPI (i.e. compile the MPI-Core) and provide basic features of MPI. Check [here](https://github.com/KratosMultiphysics/Kratos/blob/master/kratos/mpi/tests/test_mpi_data_communicator_python.py) to see which functionalities are exposed to Python.

If you want to run Kratos in MPI together with e.g. the `FluidDynamicsApplication` or the `StructuralMechanicsApplication`, then you also need [Trilinos](https://trilinos.org/) for solving the distributed system of equations and [Metis](http://glaros.dtc.umn.edu/gkhome/metis/metis/overview) for partitioning of the problem.
In order to use them it is required to compile the `TrilinosApplication` and the `MetisApplication` respectively. These applications require to install the corresponding libraries first.

### MetisApplication
#### Installing METIS using the package-manager
On Ubuntu 18.04, the following command installs the necessary files:
```Shell
sudo apt-get install libmetis-dev
```
#### Compiling METIS yourself
Compiling is straight-forward using the build-instructions that come with the download.

#### Compiling the `MetisApplication`
Afterwards add the following lines to your configure-script:
```Shell
-DMETIS_APPLICATION=ON \
-DUSE_METIS_5=ON \
```

### TrilinosApplication

#### Installing Trilinos using the package-manager
On Ubuntu 18.04, the following command installs the necessary files:
```Shell
sudo apt-get install trilinos-all-dev
```
Add the following to your configure-script:
```Shell
-DTRILINOS_INCLUDE_DIR="/usr/include/trilinos" \
-DTRILINOS_LIBRARY_DIR="/usr/lib/x86_64-linux-gnu" \
-DTRILINOS_LIBRARY_PREFIX="trilinos_" \
```
#### Compiling Trilinos yourself
Some information on how to compile Trilinos (version 12.10.1) is provided in the following, but this might not be applicable for all systems. Please consult the build-instructions of Trilinos itself if needed or open an issue.

Add the following to your configure-script if you compile Trilinos yourself:
```Shell
-DTRILINOS_ROOT="path/to/trilinos" \
```

Depending on the configuration it might also be necessary to specify `TRILINOS_SOURCE` for CMake to find the correct trilinos-libraries.
***

It is recommended to create a build directory in the root folder of Trilinos. Inside this folder, create a `do-configure.sh` to compile Trilinos.

If you use LAPACK 3.6 or newer, then you have to apply the following fixes: (sources: ​[1](https://github.com/gahansen/Albany/wiki/ALCF-Vesta), [​2](https://www.dealii.org/developer/external-libs/trilinos.html)):

In `trilinos-12.10.1-Source/packages/epetra/src/Epetra_LAPACK_wrappers.h`

Change
```
#define DGGSVD_F77  F77_BLAS_MANGLE(dggsvd,DGGSVD)
#define SGGSVD_F77  F77_BLAS_MANGLE(sggsvd,SGGSVD)
```
to
```
#define DGGSVD_F77  F77_BLAS_MANGLE(dggsvd3,DGGSVD3)
#define SGGSVD_F77  F77_BLAS_MANGLE(sggsvd3,SGGSVD3)
```

This is an example for a `do-configure.sh`. Of course, the paths have to be adjusted
```
TRILINOS_ROOT="${HOME}/software/kratos/trilinos"
EXTRA_LINK_FLAGS=""
EXTRA_ARGS=$@
MPI_ROOT="${HOME}/software/ompi"
METIS_ROOT="{HOME}/software/kratos/parmetis/ParMetis-3.2.0"
LAPACK_ROOT="${HOME}/software/kratos/lapack/lapack-3.7.0"

rm CMakeCache.txt
rm -rf CMakeFiles
rm *.cmake

cmake \
  -D CMAKE_INSTALL_PREFIX:FILEPATH="${TRILINOS_ROOT}" \
  -D CMAKE_BUILD_TYPE:STRING=RELEASE \
  -D Trilinos_SOURCE_DIR="${TRILINOS_SOURCE}" \
  -D CMAKE_CXX_COMPILER=mpicxx \
  -D CMAKE_C_COMPILER=mpicc \
  -D CMAKE_Fortran_COMPILER=mpif90 \
  -D TPL_ENABLE_MPI:BOOL=ON \
  -D Trilinos_ENABLE_CXX11=ON\
  -D MPI_BASE_DIR="${MPI_ROOT}" \
  -D MPI_INCLUDE_DIRS:PATH="${MPI_ROOT}/include" \
  -D BUILD_SHARED_LIBS:BOOL=ON \
  -D BLAS_LIBRARY_DIRS:FILEPATH="${LAPACK_ROOT}" \
  -D BLAS_LIBRARY_NAMES:STRING="librefblas.a" \
  -D LAPACK_LIBRARY_DIRS:FILEPATH="${LAPACK_ROOT}" \
  -D LAPACK_LIBRARY_NAMES:STRING="liblapack.a" \
  -D TPL_ENABLE_ParMETIS:BOOL=ON \
  -D ParMETIS_INCLUDE_DIRS:PATH="${METIS_ROOT}" \
  -D ParMETIS_LIBRARY_NAMES:STRING="parmetis" \
  -D ParMETIS_LIBRARY_DIRS:PATH="${METIS_ROOT}" \
  -D TPL_ENABLE_METIS:BOOL=ON \
  -D METIS_INCLUDE_DIRS:PATH="${METIS_ROOT}/METISLib" \
  -D METIS_LIBRARY_NAMES:STRING="metis" \
  -D METIS_LIBRARY_DIRS:PATH="${METIS_ROOT}" \
  -D Trilinos_EXTRA_LINK_FLAGS:STRING="$EXTRA_LINK_FLAGS" \
  -D Trilinos_ENABLE_Amesos:BOOL=ON \
  -D Amesos_ENABLE_SuperLUDist:BOOL=ON \
  -D Trilinos_ENABLE_Anasazi:BOOL=ON \
  -D Trilinos_ENABLE_AztecOO:BOOL=ON \
  -D AztecOO_ENABLE_Teuchos:BOOL=ON \
  -D Trilinos_ENABLE_Didasko:BOOL=ON \
  -D Trilinos_ENABLE_Epetra:BOOL=ON \
  -D Trilinos_ENABLE_EpetraExt:BOOL=ON \
  -D Trilinos_ENABLE_Galeri:BOOL=ON \
  -D Trilinos_ENABLE_Ifpack:BOOL=ON \
  -D Trilinos_ENABLE_ML:BOOL=ON \
  -D Trilinos_ENABLE_PyTrilinos:BOOL=OFF \
  -D Trilinos_ENABLE_Teuchos:BOOL=ON \
  -D Trilinos_ENABLE_Triutils:BOOL=ON \
  -D DART_TESTING_TIMEOUT:STRING=600 \
  -D CMAKE_Fortran_FLAGS:STRING="-O5 -funroll-all-loops -fPIC" \
  -D CMAKE_C_FLAGS:STRING="-O3 -fPIC -funroll-loops -march=native" \
  -D CMAKE_CXX_FLAGS:STRING="-O3 -fPIC -funroll-loops -ffast-math -march=native -DMPICH_IGNORE_CXX_SEEK" \
 $EXTRA_ARGS \
 ${TRILINOS_SOURCE}
```
Build Trilinos with:
```
sh do-configure.sh
make
make install
```

#### Compiling the `TrilinosApplication`
Afterwards add the following lines to your configure-script:
```Shell
-DTRILINOS_APPLICATION=ON \
```

### Testing MPI compilation
To to tests the compilation, you can execute a simple python script containing these lines:

```
from KratosMultiphysics import *
from KratosMultiphysics.mpi import *
from KratosMultiphysics.MetisApplication import *
from KratosMultiphysics.TrilinosApplication import *
```

### Running Kratos in MPI
To execute Kratos in parallel, you can for example use the `mpiexec` command (running with 4 processes):

`mpiexec -np 4 python3 MainKratos.py --using-mpi`

Additional information regarding the compilation can be found [here](https://github.com/KratosMultiphysics/Kratos/blob/master/cmake_build/README.txt)
-->


    <!-- <div class="tags">
        
        <b>Tags: </b>
        
        
        
        
        
    </div> -->

</div>



<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2022 CIMNE. All rights reserved. <br />
 Site last generated: Dec 30, 2022 <br />
<p style="padding-right:32px;"><br><img src="/images/company_logo.png" alt="Company logo" height="100px"/></p>
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

</html>
